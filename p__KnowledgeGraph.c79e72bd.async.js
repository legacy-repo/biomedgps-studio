(self.webpackChunkbiomedgps_studio=self.webpackChunkbiomedgps_studio||[]).push([[344],{87098:function(Ma,Nt,c){"use strict";c.r(Nt),c.d(Nt,{default:function(){return Pi}});var wt=c(13062),X=c(71230),ge=c(57663),W=c(71577),Ne=c(89032),we=c(15746),y=c(2824),_t=c(22325),vn=c(20228),Qt=c(11382),kt=c(66456),Ye=c(15885),Et=c(13254),ke=c(14277),It=c(22385),ft=c(94199),Pt=c(18106),ve=c(63885),m=c(11849),me=c(86582),Tt=c(34792),Q=c(48086),Dt=c(71153),Fe=c(60331),Gt=c(71194),tt=c(50146),l=c(67294),Mt=c(53110),ht=c(57119),pn=c(21444),nt=c(38296),Lt=c(24616),vt=c(90841),Yt=c(62298),at=c(19671),La=c(57338),pt=c(273),t=c(85893),gt=function(e){var n=e.position,a=e.onClick,r=(0,l.useState)(!1),o=(0,y.Z)(r,2),i=o[0],s=o[1];(0,l.useEffect)(function(){e.visible&&s(e.visible)},[e.visible]);var d=function(){e.onClose&&e.onClose(),s(!i)},u={right:{right:"0px",top:"45%",height:"80px",width:"38px",borderColor:"transparent #ddd transparent transparent"},top:{top:"0px",left:"45%",width:"80px",height:"38px",borderColor:"#ddd transparent transparent transparent"},left:{left:"0px",top:"45%",height:"80px",width:"38px",borderColor:"transparent transparent transparent #ddd"},bottom:{left:"45%",bottom:"0px",width:"80px",height:"38px",borderColor:"transparent transparent #ddd transparent"}},Z={right:{left:"5px",top:"8px"},top:{top:"-20px",left:"40%"},bottom:{left:"15px",top:"0px"},left:{left:"-15px",top:"8px"}},b=n||"right",x=u[b]?u[b]:u.right,h=Z[b]?Z[b]:Z.right;return(0,t.jsxs)("div",{className:"toolbar",children:[(0,t.jsx)("div",{style:(0,m.Z)({zIndex:10,position:"absolute",cursor:"pointer",borderStyle:"solid",borderWidth:"20px"},x),onClick:function(){console.log("Show Drawer: ",b),d(),a&&a(b)},children:(0,t.jsx)("span",{style:(0,m.Z)({position:"absolute"},h),children:b==="top"||b==="bottom"?"=":"||"})}),(0,t.jsx)(pt.Z,{width:e.width?e.width:"300px",height:e.height?e.height:"300px",title:e.title?e.title:!1,getContainer:!1,style:{position:"absolute"},closable:e.closable?e.closable:!1,mask:e.maskVisible?e.maskVisible:!1,placement:n,onClose:d,open:i,children:i?e.children:null})]})},Je=gt,se=c(96486),gn=c(77576),Ie=c(12028),F=c(98858),M=c(4914),te=c(91220),oe=c(43358),w=c(34041),rt=c(30887),Se=c(18515),ot=c(42134),Ot=c(82735),Ue=c(98818),Pe=c(36950),mn=(0,l.createContext)({}),Zl=c(20136),yn=c(55241),Oa=c(29154),Ra=c(84387),Aa=c(54549),Fa=function(e){var n=(0,l.useRef)(null),a=(0,l.useRef)(null);return(0,l.useEffect)(function(){if(a.current){var r=a.current;r.addEventListener("click",function(){console.log("Focus the explanation panel"),r.style.zIndex="10";for(var o=document.getElementsByClassName("explanation-panel"),i=0;i<o.length;i++){var s=o[i];s!==r&&(s.style.zIndex="2")}})}},[a.current]),(0,t.jsxs)("div",{className:"explanation-panel",ref:a,style:{top:e.top||"200px",right:e.right||e.width||"400px"},children:[(0,t.jsxs)("div",{ref:n,style:{position:"absolute",width:e.width||"400px",maxWidth:"auto",maxHeight:"auto"},className:"explanation-content",children:[(0,t.jsxs)("div",{className:"explanation-title",children:[(0,t.jsx)("h3",{children:e.title||"Explanation"}),e.help?(0,t.jsx)(yn.Z,{content:e.help,title:"Help",placement:"topRight",children:(0,t.jsx)(Ra.Z,{})}):null,e.onClose?(0,t.jsx)(Aa.Z,{className:"explanation-close",onClick:function(){var o;(o=e.onClose)===null||o===void 0||o.call(e)}}):null]}),(0,t.jsx)("div",{className:"explanation-info",children:e.children})]}),(0,t.jsx)(Oa.ZP,{target:n,draggable:!0,throttleDrag:1,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,onDrag:function(o){o.target.style.transform=o.transform},resizable:!0,keepRatio:!1,throttleResize:1,renderDirections:["nw","n","ne","w","e","sw","s","se"],onResize:function(o){o.target.style.width="".concat(o.width,"px"),o.target.style.height="".concat(o.height,"px"),o.target.style.transform=o.drag.transform}})]})},Rt=Fa,At=c(4714),za=c(49346),Ee=c(50651),xn=c(40847),Va=c(55076),Sn=c(57820),Ba=c(43396),Zn=c(20015),Jt=c(93181),Ua=c(7364),bn=c(1870),Wa=c(71938),Ka=c(62876),Ha=c(73218),$a=c(43587),Ft=c(33182),_a=c(93695),Cn=c(95357),zt=c(82738),Qa=c(90631),Ya=c(73171),Ja=function(e){var n=e.data,a=e.style,r=n.map(function(o,i){return(0,t.jsx)(M.Z.Item,{label:o[0],children:o[1]},i)});return r.length>0?(0,t.jsx)(M.Z,{size:"small",column:2,title:null,labelStyle:{backgroundColor:"transparent"},bordered:!0,style:(0,m.Z)({},a),children:r}):(0,t.jsx)("span",{style:a,children:"No Properties"})},Xa=Ja,jn=c(93224),He=c(81209),qa=["source","target"],er=function(e,n){var a=new Map;e.forEach(function(o){var i=o.source,s=o.target,d="".concat(i,"-").concat(s);if(a.has(d)){var u=a.get(d);u&&a.set(d,[].concat((0,me.Z)(u),[o]))}else a.set(d,[o])});var r=[];return a.forEach(function(o,i){if(o.length>1){var s=(0,y.Z)(o,1),d=s[0],u=d.source,Z=d.target,b=(0,jn.Z)(d,qa),x=o.map(function(h){return h.reltype});r.push((0,m.Z)((0,m.Z)({source:u,target:Z},b),{},{reltype:x.join("|"),relid:"MultipleLabels-".concat(u,"-").concat(Z),style:(0,m.Z)((0,m.Z)({},b.style),{},{label:{value:"MultipleLabels"}}),data:(0,m.Z)((0,m.Z)({},b.data),{},{identity:"MultipleLabels-".concat(u,"-").concat(Z),reltypes:x})}))}else r.push(o[0])}),r},Nn=function(e,n){var a=[];e.map(function(s){a=a.concat(Object.keys(s))});var r=[],o=(0,se.uniq)(a),i=(0,se.filter)(o,function(s){return n.indexOf(s)<0});return i.map(function(s){r.push({title:He.Z.titleCase(s),key:s,dataIndex:s,align:"center",ellipsis:!0})}),r},wn=function(e){return e.map(function(n){return kn(n)})},Xt=function(e,n){var a={},r=Object.keys(e),o=(0,se.filter)(r,function(i){return n?n.indexOf(i)<0:!0});return o.forEach(function(i){["string","number","boolean"].indexOf(typeof e[i])>=0&&(a[i]=e[i])}),a},kn=function(e,n){return e.data?(0,m.Z)((0,m.Z)({},Xt(e,n)),Xt(e.data,n)):Xt(e)};function En(v,e,n){console.log("makeQueryStr filter: ",n);var a=":select [:*]",r="",o="";if(e){var i=Object.keys(e)[0],s=Object.values(e)[0];i&&s&&(s==="ascend"?r=":order-by [:".concat(i,"]"):r=":order-by [[:".concat(i," :desc]]"))}if(v){for(var d=[],u=0,Z=Object.keys(v);u<Z.length;u++){var b=Z[u];["current","pageSize"].indexOf(b)<0&&v[b].length>0&&d.push("[:like [:upper :".concat(b,'] [:upper "%').concat(v[b],'%"]]'))}d.length==1?o=":where ".concat(d[0]):d.length>1&&(o=":where [:or ".concat(d.join(" "),"]"))}return"{".concat(a," ").concat(r," ").concat(o,"}")}function Me(v,e,n,a){var r=n||"n,m,r",o={match:v,where:e,return:r};return a!==void 0&&(o=(0,m.Z)((0,m.Z)({},o),{},{limit:a||50})),o}var bl=function(e,n){var a=n.filter(function(o){return o}),r={match:"(n)",where:"ID(n) in [".concat(a,"]"),return:"n"};return new Promise(function(o,i){e.postGraph({query_map:r}).then(function(s){s?o(s):i(s)}).catch(function(s){i(s)})})};function tr(v,e){var n=e.map(function(i){return{id:parseInt(i.id),label:i.nlabel}}),a=JSON.stringify(n,null).replace(/"([^"]+)":/g,"$1:"),r=JSON.stringify(e.map(function(i){return parseInt(i.id)}),null),o={with:"".concat(a," as nodeList, ").concat(r," as idList"),unwind:"nodeList AS node",match:"(n)-[r]-(m)",where:"node.label in labels(n) and ID(n) = node.id and ID(m) in idList",return:"n,m,r"};return new Promise(function(i,s){v.postGraph({query_map:o}).then(function(d){d?i(d):s(d)}).catch(function(d){s(d)})})}var In=function(){return"<>"},Pn=function(e,n,a,r){var o=In();return e.indexOf("::")>=0?e:[e,n,a,r].join(o)};function Tn(v){for(var e=[],n=In(),a=0;a<v.length;a++){var r=v[a].split(n),o=(0,y.Z)(r,4),i=o[0],s=o[1],d=o[2],u=o[3],Z={relationshipType:i,sourceNodeType:d,targetNodeType:u,resource:s};e.push(Z)}return e}var Dn=function(e){var n=0;return e.forEach(function(a){var r=a.toString().length;r>n&&(n=r)}),n},nr=function(e){var n=[],a=Dn(e.map(function(r){return r.relation_count}));return e.forEach(function(r){var o=r.relation_count.toString().padStart(a,"0"),i=Pn(r.relation_type,r.source,r.start_node_type,r.end_node_type);n.push({order:r.relation_count,label:"[".concat(o,"] ").concat(i),value:i})}),n.sort(function(r,o){return r.order-o.order})},Gn=function(e){var n=e.mode,a=e.node_type,r=e.node_id;return!!(n=="node"&&a&&r)},Mn=function(e){var n=e.mode,a=e.node_ids;return!!(n=="batchIds"&&a&&a.length>0)},Ln=function(e){var n=e.mode,a=e.node_id,r=e.node_type;return!!(n=="similarity"&&a&&r)},On=function(e){var n=e.mode,a=e.nodes,r=e.node_type;return!!(n=="batchNodes"&&a&&a.length>0&&r)},Rn=function(e){var n=e.mode,a=e.nodes;return!!(n=="path"&&a&&a.length>0)},ar=function(e){return!!(Gn(e)||Mn(e)||Ln(e)||On(e)||Rn(e))};function rr(v,e){console.log("makeGraphQueryStrWithSearchObject: ",e);var n=e.node_type,a=e.node_id,r=e.relation_types,o=e.all_relation_types,i=e.enable_prediction,s=e.limit,d=e.mode,u=e.node_ids,Z=e.topk,b=e.nodes;return new Promise(function(x,h){var N={},g={},S=s||50;if(d=="node"||d=="batchIds"||d=="batchNodes"||d=="path"){if(Gn(e))if(g=Me("(n:".concat(n,")-[r]-(m)"),"n.id = '".concat(a,"'"),void 0,S),!r||(r==null?void 0:r.length)==0){e.nsteps&&e.nsteps<=1?g=Me("(n:".concat(n,")-[r]-(m)"),"n.id = '".concat(a,"'"),void 0,S):g=Me("(n:".concat(n,")-[r*1..").concat(e.nsteps,"]-(m)"),"n.id = '".concat(a,"'"),"n,r,m",S);var I=o?o.filter(function(A){return A.match(n||"")}):[],j=Tn(I),G=j.map(function(A){return"'".concat(A.relationshipType,"'")});N={source_id:"".concat(a),relation_types:G,topk:10,enable_prediction:i}}else{var C=Tn(r),O=C.filter(function(A){return A.targetNodeType}),J="";if(O.length>0){var D=(0,se.uniq)(C.map(function(A){return"m:".concat(A.targetNodeType)})).join(" or ");J=D?"( ".concat(D," ) and "):""}var P=C.filter(function(A){return A.resource}),L="";if(P.length>0){var K=(0,se.uniq)(C.map(function(A){return"'".concat(A.resource,"'")})).join(",");L=K?"r.resource in [".concat(K,"] and "):""}var H=(0,se.uniq)(C.map(function(A){return A.relationshipType})),$=H.map(function(A){return"type(r) = '".concat(A,"'")}).join(" or "),ce=$?"( ".concat($," )"):"",Ze="".concat(J," ").concat(L," ").concat(ce);e.nsteps&&e.nsteps<=1?g=Me("(n:".concat(n,")-[r]-(m)"),"n.id = '".concat(a,"' and ").concat(Ze),void 0,S):g=Me("(n:".concat(n,")-[r*1..").concat(e.nsteps,"]-(m)"),"n.id = '".concat(a,"' and ").concat(Ze),void 0,S),N={source_id:a,relation_types:H,topk:Z||10,enable_prediction:i}}if(Mn(e)){var pe=u==null?void 0:u.filter(function(A){return A}).map(function(A){return"'".concat(A,"'")}).join(",");g=Me("(n)","n.id in [".concat(pe,"]"),"n",S)}if(On(e)){var V=(0,se.uniq)(b==null?void 0:b.map(function(A){return"(n.id = '".concat(A.data.id,"' and n:").concat(A.nlabel,")")})).join(" or "),_="";if(e.relation_types&&e.relation_types.length>0){var xe=(0,se.uniq)(e.relation_types.map(function(A){return"'".concat(A,"'")})).join(",");_=xe?"type(r) in [".concat(xe,"]"):""}if(e.query_mode=="each"){var ye="(".concat(V,") ").concat(_?"and "+_:""),be=_?"WHERE ".concat(_):"",De="CALL { WITH n MATCH (n)-[r]-(m:".concat(n,") ").concat(be,"  RETURN m LIMIT ").concat(S," }");g=Me("(n)-[r]-(:".concat(n,")"),"".concat(ye," ").concat(De),"n,r,m")}else g=Me("(n)-[r]-(m:".concat(n,")"),"".concat(V," ").concat(_),"n,r,m",S)}if(Rn(e)){var le=e.nodes,Te=e.nsteps,Ge=(0,se.uniq)(le==null?void 0:le.map(function(A){return"(n.id = '".concat(A.data.id,"' and n:").concat(A.nlabel,")")})).join(" or "),Ce=(0,se.uniq)(le==null?void 0:le.map(function(A){return"(m.id = '".concat(A.data.id,"' and m:").concat(A.nlabel,")")})).join(" or "),Ve="(".concat(Ge,") ").concat(Te&&Te==1?"and":"or"," (").concat(Ce,")");g=Me("(n)-[r*1..".concat(Te||3,"]-(m)"),Ve,"n,r,m",S)}console.log("query_str: ",g),Object.keys(g).length>0?v.postGraph((0,m.Z)({query_map:g},N)).then(function(A){A?x(A):h(A)}).catch(function(A){h(A)}):x({nodes:[],edges:[]})}Ln(e)&&v.postSimilarity({source_type:n,source_id:"".concat(a),topk:Z||10}).then(function(A){console.log("Find similar nodes: ",A),A?x(A):h(A)}).catch(function(A){console.log("Error when finding similar nodes: ",A),h(A)})})}var Cl=function(e,n,a){return new Promise(function(r,o){n&&a?e.postGraph({query_map:Me("(n:".concat(n,")-[r]-(m)"),"n.id = '".concat(a,"'"))}).then(function(i){i?r(i):o(i)}).catch(function(i){o(i)}):r({nodes:[],edges:[]})})},or=function(e,n,a){return new Promise(function(r,o){var i=n.split("::")[1],s=a.map(function(d){return"'".concat(d.split("::")[1],"'")}).join(",");e.postGraph({query_map:Me("(n)-[r]-(m)","n.id = '".concat(i,"' and m.id in [").concat(s,"]")),source_id:n,target_ids:a,enable_prediction:!0}).then(function(d){d?r(d):o(d)}).catch(function(d){o(d)})})},ir={type:"grid"},lr={type:"graphin-force",workerEnabled:!1,gpuEnabled:!1,animation:!0,preset:{type:"force"},clustering:!0,leafCluster:!0,preventOverlap:!0,nodeClusterBy:"nlabel",clusterNodeStrength:40,minNodeSpacing:20,nodeSize:40,defSpringLen:function(e,n,a){var r,o,i=40,s=(r=n.data.layout)===null||r===void 0?void 0:r.degree,d=(o=a.data.layout)===null||o===void 0?void 0:o.degree,u=Math.min(s,d);return u===1?i*4:Math.min(u*i*1.5,200)},getId:function(e){return e.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 80},getHGap:function(){return 50}},mt=[{type:"preset"},{type:"auto"},(0,m.Z)({},lr),{type:"force",workerEnabled:!1,gpuEnabled:!1,animation:!0,preset:{type:"grid"},clustering:!0,leafCluster:!0,preventOverlap:!0,clusterAttr:"nlabel",nodeClusterBy:"nlabel",clusterNodeStrength:40,minNodeSpacing:20,nodeSize:40,defSpringLen:function(e,n,a){var r,o,i=40,s=(r=n.data.layout)===null||r===void 0?void 0:r.degree,d=(o=a.data.layout)===null||o===void 0?void 0:o.degree,u=Math.min(s,d);return u===1?i*4:Math.min(u*i*1.5,200)},getId:function(e){return e.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 80},getHGap:function(){return 50}},{type:"grid",begin:[0,0],preventOverlap:!0,preventOverlapPdding:20,nodeSize:30,condense:!1,rows:5,cols:5,sortBy:"degree",workerEnabled:!1},{type:"radial",center:[200,200],linkDistance:80,maxIteration:1e3,sortBy:"degree",unitRadius:150,preventOverlap:!0,nodeSize:30,strictRadial:!1,workerEnabled:!1},{type:"concentric",center:[200,200],preventOverlap:!0,nodeSize:30,sweep:10,minNodeSpacing:5,equidistant:!0,startAngle:0,clockwise:!0,maxLevelDiff:.5,sortBy:"degree",workerEnabled:!1}],sr=function(e){var n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;return n.test(e)},Vt=function(e){if(!e)return[];var n=e.getNodes().filter(function(a){return a.hasState("selected")});return n.map(function(a){return a.getModel()})},dr=function(e){if(!e)return[];var n=e.getNodes();return n.map(function(a){return a.getModel()})},An=function(e){var n={nodes:e.getNodes().map(function(r){var o=r.getModel();return(0,m.Z)((0,m.Z)({},o),{},{style:o._initialStyle,_initialStyle:o.style})}),edges:e.getEdges().map(function(r){var o=r.getModel();return(0,m.Z)((0,m.Z)({},o),{},{style:o._initialStyle,_initialStyle:o.style})})},a=e.get("layout");return{data:n,layout:{type:"preset"},defaultLayout:a}},jl=c(74379),qt=c(38648),Nl=c(49111),en=c(19650),wl=c(47673),Bt=c(4107),Xe=c(32059),cr=c(37763),ur=c.n(cr),Fn=c(76570),fr=c(92570),hr=c(72850);function vr(v,e,n,a,r){for(var o=[],i=[{nodeId:v,path:[v]}],s=new Set([v]),d=new Set,u=function(){var b=i.shift(),x=b.nodeId,h=b.path;if(x===e){for(var N=h.map(function(D){var P=n.find(function(L){return L.id===D});return P?P.id:n[0].id}),g=[],S=function(P){var L=n.find(function($){return $.id===h[P-1]}),K=n.find(function($){return $.id===h[P]});if(L&&K){var H=a.find(function($){return $.source===L.id&&$.target===K.id||$.source===K.id&&$.target===L.id});H?g.push(H.relid):g.push("")}},I=1;I<h.length;I++)S(I);var j=N.join(",")+":"+g.join(",");d.has(j)||(o.push({nodes:N,edges:g}),d.add(j))}else{var G=r.get(x)||[],C=(0,te.Z)(G),O;try{for(C.s();!(O=C.n()).done;){var J=O.value;s.has(J)||(s.add(J),i.push({nodeId:J,path:[].concat((0,me.Z)(h),[J])}))}}catch(D){C.e(D)}finally{C.f()}}};i.length>0;)u();return o}function pr(v,e,n,a,r){var o=[],i=[];function s(d){if(o.push(d),d===e)i.push({nodes:o.map(function(h){var N=n.find(function(g){return g.id===h});return N?N.id:n[0].id}),edges:o.slice(1).map(function(h,N){var g=n.find(function(j){return j.id===o[N]}),S=n.find(function(j){return j.id===h});if(g&&S){var I=a.find(function(j){return j.source===g.id&&j.target===S.id||j.source===S.id&&j.target===g.id});return I?I.relid:""}else return""})});else{var u=r.get(d)||[],Z=(0,te.Z)(u),b;try{for(Z.s();!(b=Z.n()).done;){var x=b.value;!o.includes(x)&&o.length<=3&&s(x)}}catch(h){Z.e(h)}finally{Z.f()}}o.pop()}return s(v),i}var gr=function(e){var n=(0,l.useState)(""),a=(0,y.Z)(n,2),r=a[0],o=a[1],i=(0,l.useState)(""),s=(0,y.Z)(i,2),d=s[0],u=s[1],Z=l.useRef(null),b=l.useRef(null),x=(0,l.useContext)(Pe.Z),h=x.graph,N=(0,l.useState)({}),g=(0,y.Z)(N,2),S=g[0],I=g[1],j=(0,l.useState)({}),G=(0,y.Z)(j,2),C=G[0],O=G[1],J=(0,l.useState)(null),D=(0,y.Z)(J,2),P=D[0],L=D[1],K=(0,l.useState)(!1),H=(0,y.Z)(K,2),$=H[0],ce=H[1],Ze=(0,l.useState)([]),pe=(0,y.Z)(Ze,2),V=pe[0],_=pe[1];(0,l.useEffect)(function(){if(!(e.selectedNodes.length<=1)){var q=e.selectedNodes[0].id,Y=(0,te.Z)(e.selectedNodes),ee;try{var T=function(){var f=ee.value,k=q+"_"+f.id;if(!S[k]){var B=e.algorithm=="bfs"?vr:pr,U=B(e.selectedNodes[0].id,f.id,e.nodes,e.edges,e.adjacencyList);I(function(ae){return(0,m.Z)((0,m.Z)({},ae),{},(0,Xe.Z)({},k,U))}),O(function(ae){return(0,m.Z)((0,m.Z)({},ae),{},(0,Xe.Z)({},k,e.algorithm))})}};for(Y.s();!(ee=Y.n()).done;)T()}catch(p){Y.e(p)}finally{Y.f()}}},[e.selectedNodes]),(0,l.useEffect)(function(){for(var q=[],Y=0,ee=Object.keys(S);Y<ee.length;Y++)for(var T=ee[Y],p=0;p<S[T].length;p++)q.push({key:T,index:p,path:S[T][p].nodes.map(function(f){var k=e.nodes.find(function(B){return B.id===f});return k?k.data.name:"Unknown"}).join(" -> "),nsteps:S[T][p].edges.length});_((0,se.uniqBy)((0,se.sortBy)(q,["nsteps"]),"path"))},[S]);function xe(q){ye();var Y=q.some(function(k){return k.nodes.length>0});(q.length===0||!Y)&&Q.ZP.warning("No path found");var ee=(0,me.Z)(new Set(q.flatMap(function(k){return k.nodes}))),T=(0,me.Z)(new Set(q.flatMap(function(k){return k.edges}))),p=h.getNodes();p.forEach(function(k){var B=k.getModel();B.id&&!ee.includes(B.id)?h.setItemState(k,"inactive",!0):h.setItemState(k,"active",!0)});var f=h.getEdges();f.forEach(function(k){var B=k.getModel();B.relid&&!T.includes(B.relid)?h.setItemState(k,"inactive",!0):h.setItemState(k,"active",!0)})}function ye(){var q=h.getNodes();q.forEach(function(ee){h.setItemState(ee,"inactive",!1)});var Y=h.getEdges();Y.forEach(function(ee){h.setItemState(ee,"inactive",!1)})}function be(q){var Y=(0,me.Z)(new Set(q.flatMap(function(f){return f.nodes}))),ee=(0,me.Z)(new Set(q.flatMap(function(f){return f.edges}))),T=h.getNodes();T.forEach(function(f){var k=f.getModel();k.id&&!Y.includes(k.id)?h.setItemState(f,"inactive",!1):h.setItemState(f,"active",!1)});var p=h.getEdges();p.forEach(function(f){var k=f.getModel();k.relid&&!ee.includes(k.relid)?h.setItemState(f,"inactive",!1):h.setItemState(f,"active",!1)})}var De=function(){I({}),e.onClosePathsFinder()},le=function(Y){ce(!Y)},Te=function(){if(e.selectedNodes.length<=1)return null;var Y=e.selectedNodes[0].id;return e.selectedNodes.map(function(ee){var T=Y+"_"+ee.id;return(0,t.jsxs)("li",{className:C[T],onMouseEnter:function(){xe(S[T])},onMouseLeave:function(){be(S[T])},children:[(0,t.jsx)("span",{children:ee.data.name}),"\xA0",(0,t.jsx)("span",{children:C[T]==="bfs"?"BFS":"DFS"})]},T)})},Ge=function(Y,ee,T){ee(),o(Y[0]),u(T)},Ce=function(Y){Y(),o("")},Ve=function(Y){return{filterDropdown:function(T){var p=T.setSelectedKeys,f=T.selectedKeys,k=T.confirm,B=T.clearFilters,U=T.close;return(0,t.jsxs)("div",{style:{padding:8},onKeyDown:function(ie){return ie.stopPropagation()},children:[(0,t.jsx)(Bt.Z,{ref:Z,placeholder:"Search ".concat(Y),value:f[0],onChange:function(ie){return p(ie.target.value?[ie.target.value]:[])},onPressEnter:function(){return Ge(f,k,Y)},style:{marginBottom:8,display:"block"}}),(0,t.jsxs)(en.Z,{children:[(0,t.jsx)(W.Z,{type:"primary",onClick:function(){return Ge(f,k,Y)},icon:(0,t.jsx)(Fn.Z,{}),size:"small",style:{width:90},children:"Search"}),(0,t.jsx)(W.Z,{onClick:function(){return B&&Ce(B)},size:"small",style:{width:90},children:"Reset"}),(0,t.jsx)(W.Z,{type:"link",size:"small",onClick:function(){k({closeDropdown:!1}),o(f[0]),u(Y)},children:"Filter"}),(0,t.jsx)(W.Z,{type:"link",size:"small",onClick:function(){U()},children:"close"})]})]})},filterIcon:function(T){return(0,t.jsx)(Fn.Z,{style:{color:T?"#1890ff":void 0}})},onFilter:function(T,p){return p[Y].toString().toLowerCase().includes(T.toLowerCase())},onFilterDropdownOpenChange:function(T){T&&setTimeout(function(){var p;return(p=Z.current)===null||p===void 0?void 0:p.select()},100)},render:function(T){return d===Y?(0,t.jsx)(ur(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[r],autoEscape:!0,textToHighlight:T?T.toString():""}):T}}},A=[(0,m.Z)({title:"Path",key:"path",align:"center",dataIndex:"path",width:300},Ve("path")),{title:"Num of Steps",dataIndex:"nsteps",key:"nsteps",align:"center",width:150,sorter:function(Y,ee){return Y.nsteps-ee.nsteps},sortDirections:["descend","ascend"]},{title:"Action",key:"action",align:"center",fixed:"right",width:150,render:function(Y,ee,T){return(0,t.jsxs)(en.Z,{children:[(0,t.jsx)(W.Z,{size:"small",type:"link",disabled:ee.path===P,onClick:function(f){var k=ee.key,B=ee.index,U=[S[k][B]];xe(U),L(ee.path)},children:"Show"}),(0,t.jsx)(W.Z,{size:"small",type:"link",onClick:function(f){qt.Z.open({type:"info",message:"Explain the Current Path",description:"Not implemented yet (We will try to train a LLM with knowledge graph to explain why the path would be believable)",duration:10})},children:"Explain"})]})}}];return(0,t.jsxs)("div",{className:"show-paths-panel",children:[(0,t.jsxs)("div",{className:"title",children:[(0,t.jsx)("h3",{children:"Paths Finder"}),(0,t.jsxs)("span",{children:[(0,t.jsx)(fr.Z,{onClick:function(){return le($)}}),(0,t.jsx)(hr.Z,{onClick:De})]})]}),(0,t.jsx)("ul",{className:"status-ul body",children:Te()}),$?(0,t.jsx)(Rt,{title:"Path Table",onClose:function(){L(null),ce(!1)},width:"600px",children:(0,t.jsx)(Ye.Z,{className:"path-table",rowKey:function(Y){return"".concat(Y.index,"-").concat(Y.path)},columns:A,dataSource:V,ref:b,scroll:{y:200},size:"small",pagination:{simple:!0,defaultPageSize:1e3,position:["topLeft"],showTotal:function(Y){return"Total ".concat(Y," items")}}})}):null]})},mr=gr,yr=c(18045),xr=Ot.Z.MiniMap,Sr=Ot.Z.SnapLine,zn=Ot.Z.Tooltip,Vn=Ot.Z.Legend,Zr=Ue.Z.ZoomCanvas,br=Ue.Z.ActivateRelations,Cr=Ue.Z.ClickSelect,jr=Ue.Z.Hoverable,Nr=Ue.Z.FitView,wr=Ue.Z.DragNodeWithForce,kr=Ue.Z.DragNode,Er=Ue.Z.LassoSelect,Ir=Ue.Z.BrushSelect,it=At.Z.Menu,Pr={line:{stroke:"lightgreen",lineWidth:1}},Tr=function(e){var n=(0,l.useContext)(Pe.Z),a=n.graph,r=n.apis,o=e.item,i=e.chatbotVisible,s=e.onExplainRelationship,d=(0,l.useState)(!1),u=(0,y.Z)(d,2),Z=u[0],b=u[1],x=(0,l.useState)(void 0),h=(0,y.Z)(x,2),N=h[0],g=h[1],S=(0,l.useState)(void 0),I=(0,y.Z)(S,2),j=I[0],G=I[1],C=(0,l.useState)(void 0),O=(0,y.Z)(C,2),J=O[0],D=O[1];(0,l.useEffect)(function(){if(o){var K=o.getModel(),H=a.findById(K.source).getModel(),$=a.findById(K.target).getModel();H&&$&&K&&(g(H),G($),D(K),b(!0))}else b(!1),g(void 0),G(void 0),D(void 0)},[]);var P=[{key:"show-edge-details",icon:(0,t.jsx)(xn.Z,{}),label:"Show Edge Details"},{key:"explain-relationship",icon:(0,t.jsx)(Va.Z,{}),label:"Explain Relationship (Experimental)"},{key:"analyze-with-clinical-data",icon:(0,t.jsx)(Sn.Z,{}),label:"Analyze with Clinical Data",children:[{key:"barchart",icon:(0,t.jsx)(Sn.Z,{}),label:"Bar Chart"},{key:"boxchart",icon:(0,t.jsx)(Ba.Z,{}),label:"Box Plot"},{key:"heatmap",icon:(0,t.jsx)(Zn.Z,{}),label:"Heatmap"},{key:"scatterchart",icon:(0,t.jsx)(Jt.Z,{}),label:"Scatter Chart"}]},{key:"analyze-with-omics-data",icon:(0,t.jsx)(Ua.Z,{}),label:"Analyze with Omics Data",children:[{key:"heatmap-omics",icon:(0,t.jsx)(Zn.Z,{}),label:"Heatmap"},{key:"scatterchart-omics",icon:(0,t.jsx)(Jt.Z,{}),label:"Scatter Chart"}]}];i&&P.push({key:"ask-question",icon:(0,t.jsx)(bn.Z,{}),label:"Ask Chatbot",children:[{key:"what-is-the-relationship",icon:(0,t.jsx)(Wa.Z,{}),label:"What is the relationship between the two nodes?"}]});var L=function(H){e.onChange&&N&&j&&J&&a&&r?(e.onChange(H,N,j,J,a,r),b(!1)):Q.ZP.warn("Cannot catch the changes.")};return Z?(0,t.jsx)(Se.Z,{items:P,onClick:L}):null},Dr=function(e){var n=(0,l.useContext)(Pe.Z),a=n.graph,r=n.apis,o=e.item,i=e.chatbotVisible,s=(0,l.useState)(!1),d=(0,y.Z)(s,2),u=d[0],Z=d[1];console.log("NodeMenu",e.item);var b=(0,l.useState)(void 0),x=(0,y.Z)(b,2),h=x[0],N=x[1];(0,l.useEffect)(function(){if(o&&o._cfg){var I=o.getModel();N(I),Z(!0)}else Z(!1),N(void 0)},[]);var g=[{key:"show-node-details",icon:(0,t.jsx)(xn.Z,{}),label:"Show Node Details"},{key:"expand-one-level",icon:(0,t.jsx)(Ka.Z,{}),label:"Expand One Level"},{key:"expand-selected-nodes",icon:(0,t.jsx)(nt.Z,{}),label:"Expand Selected Nodes"},{key:"reverse-selected-nodes",icon:(0,t.jsx)(Ha.Z,{}),label:"Reverse Selected Nodes"},{key:"predict-relationships",icon:(0,t.jsx)($a.Z,{}),label:"Predict Relationships"},{key:"visulize-similarities",icon:(0,t.jsx)(Jt.Z,{}),label:"Visualize Similarities"},{key:"expand-all-paths",icon:(0,t.jsx)(Ft.Z,{}),label:"Expand Paths (Within 3 Steps)",children:[{key:"expand-all-paths-1",icon:(0,t.jsx)(Ft.Z,{}),label:"Within 1 Step"},{key:"expand-all-paths-2",icon:(0,t.jsx)(Ft.Z,{}),label:"Within 2 Step"},{key:"expand-all-paths-3",icon:(0,t.jsx)(Ft.Z,{}),label:"Within 3 Step"}]},{key:"delete-nodes",icon:(0,t.jsx)(_a.Z,{}),label:"Delete Selected Node(s)",danger:!0}];i&&g.push({key:"ask-question",icon:(0,t.jsx)(bn.Z,{}),label:"Ask Chatbot",children:[{key:"what-is-the-node",icon:(0,t.jsx)(Cn.Z,{}),label:"What is the node?"}]});var S=function(j){j.key==="reverse-selected-nodes"?(a.getNodes().forEach(function(G){G.hasState("selected")?a.setItemState(G,"selected",!1):a.setItemState(G,"selected",!0)}),h&&a.setItemState(h.id,"selected",!1),Z(!1)):e.onChange&&h&&a&&r?(e.onChange(j,h,a,r),Z(!1)):Q.ZP.warn("Cannot catch the changes.")};return u?(0,t.jsx)(Se.Z,{items:g,onClick:S}):null},Gr=function(e){var n=(0,l.useContext)(Pe.Z),a=n.graph,r=n.contextmenu,o=n.apis,i=r.canvas,s=function(){if(a.getNodes().length==0){Q.ZP.warn("No data to download");return}a.downloadFullImage("canvas","image/png",{backgroundColor:"#fff",padding:10}),i.handleClose()},d=function(){var h=An(a);if(h.data.nodes.length==0){Q.ZP.warn("No data to download");return}var N={payload:h,name:"shared-graph",description:"Shared graph"},g=new Blob([JSON.stringify(N)],{type:"application/json"}),S=document.createElement("a");S.href=URL.createObjectURL(g),S.download="graph.json",S.click()},u=function(){e.onCanvasClick&&e.onCanvasClick({key:"auto-connect",name:"AutoConnect"},a,o)},Z=function(){e.onClearGraph?(e.onClearGraph(),Q.ZP.info("Clear canvas successfully")):Q.ZP.warn("Cannot clear canvas"),i.handleClose()},b=function(){e.handleOpenFishEye&&e.handleOpenFishEye()};return(0,t.jsxs)(it,{bindType:"canvas",children:[(0,t.jsx)(it.Item,{onClick:u,children:(0,t.jsxs)(W.Z,{type:"text",children:[(0,t.jsx)(zt.Z,{})," Auto Connect Graph"]})}),(0,t.jsx)(it.Item,{onClick:b,children:(0,t.jsxs)(W.Z,{type:"text",children:[(0,t.jsx)(Cn.Z,{})," Enable FishEye"]})}),(0,t.jsx)(it.Item,{onClick:d,children:(0,t.jsxs)(W.Z,{type:"text",children:[(0,t.jsx)(Qa.Z,{})," Download Graph Data"]})}),(0,t.jsx)(it.Item,{onClick:s,children:(0,t.jsxs)(W.Z,{type:"text",children:[(0,t.jsx)(at.Z,{})," Save As Image"]})}),(0,t.jsx)(it.Item,{onClick:Z,children:(0,t.jsxs)(W.Z,{type:"text",danger:!0,children:[(0,t.jsx)(Ya.Z,{}),"Clear Canvas"]})})]})},Bn=function(e){var n=e.bindType,a=e.disabled,r=(0,l.useContext)(Pe.Z),o=r.graph,i=(0,l.useState)(!1),s=(0,y.Z)(i,2),d=s[0],u=s[1];return(0,t.jsx)(jr,{bindType:n,disabled:d||a})},Mr=function(e){var n=e.visible,a=(0,l.useContext)(Pe.Z).graph;return(0,l.useEffect)(function(){a.getNodes().forEach(function(r){a.updateItem(r,{style:{label:{visible:n}}})})},[n]),null},Lr=function(e){var n=e.visible,a=(0,l.useContext)(Pe.Z).graph;return(0,l.useEffect)(function(){a.getEdges().forEach(function(r){a.updateItem(r,{style:{label:{visible:n}}})})},[n]),null},Or=function(e){if(e.selectedNode){var n=(0,l.useContext)(Pe.Z),a=n.graph,r=a.getNodes(),o=a.getEdges();e.mode=="activate"?(r.forEach(function(i){a.setItemState(i,"inactive",!1),a.setItemState(i,"active",!1)}),r.forEach(function(i){var s=i.getModel();e.selectedNode&&e.selectedNode!==s.id?(console.log("UnSelected Node: ",e.selectedNode,s.id),a.setItemState(i,"inactive",!0)):(console.log("Selected Node: ",e.selectedNode,s.id),a.setItemState(i,"active",!0))})):a.focusItem(e.selectedNode,!0)}return null},Un=function(e){var n=(0,l.useContext)(Pe.Z),a=n.graph,r=n.apis;return(0,l.useEffect)(function(){e.queriedId&&e.mode=="focus"&&r.focusNodeById(e.queriedId);var o=function(s){var d=s.item,u=d.getModel();e.mode=="focus"&&r.focusNodeById(u.id),e.onClickNode&&e.onClickNode(d.getModel())};return a.on("node:click",o),function(){a.off("node:click",o)}},[]),null},Rr=function(e){var n=(0,l.useContext)(Pe.Z),a=n.graph,r=n.apis;return(0,l.useEffect)(function(){var o=function(s){if(e.onClick){var d=s.item,u=d.getModel();e.onClick(u.id,u)}};return a.on("node:click",o),function(){a.off("node:click",o)}},[]),null},Ar=function(e){var n=(0,l.useContext)(Pe.Z),a=n.graph,r=n.apis;return(0,l.useEffect)(function(){var o=function(s){if(e.onClick){var d=s.item,u=d.getModel(),Z=a.findById(u.source).getModel(),b=a.findById(u.target).getModel();e.onClick(u.relid,Z,b,u)}};return a.on("edge:click",o),function(){a.off("edge:click",o)}},[]),null},Fr=function(){var e=(0,l.useContext)(Pe.Z),n=e.graph,a=e.apis,r=(0,l.useState)(!1),o=(0,y.Z)(r,2),i=o[0],s=o[1],d=(0,l.useState)([]),u=(0,y.Z)(d,2),Z=u[0],b=u[1],x=function(g){console.log("handleNodeSelectorChange: ",g),g&&a.focusNodeById(g)},h=function(g){if(console.log("handleNodeSearch: ",g),s(!0),g){var S=[];n.getNodes().forEach(function(I){var j=I.getModel();console.log("handleNodeSearch: ",j),(j.label&&j.label.toLowerCase().includes(g.toLowerCase())||j.data.name&&j.data.name.toLowerCase().includes(g.toLowerCase()))&&S.push({label:"".concat(j.id," | ").concat(j.data.name),value:j.id})}),b(S),s(!1)}else b([]),s(!1)};return(0,t.jsx)(w.Z,{className:"node-searcher",showSearch:!0,allowClear:!0,loading:i,defaultActiveFirstOption:!1,showArrow:!0,placement:"topRight",placeholder:"Search nodes",onSearch:h,onChange:x,options:Z,filterOption:!1,notFoundContent:(0,t.jsx)(ke.Z,{description:i?"Searching...":Z!==void 0?"Not Found":"Enter your interested node ..."})})},zr={autoPin:!1,nodeLabelVisible:!0,edgeLabelVisible:!0,nodeTooltipEnabled:!0,edgeTooltipEnabled:!1,interactiveMode:"select-nodes",selectionMode:"brush-select",miniMapEnabled:!0,snapLineEnabled:!0,infoPanelEnabled:!0},Vr=function(e){var n,a,r=e.data,o=e.style,i=e.onNodeMenuClick,s=e.onEdgeMenuClick,d=e.selectedNode,u=e.onCanvasMenuClick,Z=(0,l.useState)(!1),b=(0,y.Z)(Z,2),x=b[0],h=b[1],N=(0,l.useState)(!1),g=(0,y.Z)(N,2),S=g[0],I=g[1],j=(0,l.useState)({}),G=(0,y.Z)(j,2),C=G[0],O=G[1],J=(0,l.useState)(null),D=(0,y.Z)(J,2),P=D[0],L=D[1],K=(0,l.useState)(null),H=(0,y.Z)(K,2),$=H[0],ce=H[1],Ze=(0,l.useState)([]),pe=(0,y.Z)(Ze,2),V=pe[0],_=pe[1],xe=(0,l.useState)({}),ye=(0,y.Z)(xe,2),be=ye[0],De=ye[1],le=l.useRef(null),Te=(0,t.jsx)("p",{style:{width:"400px"},children:'If you would like to select multiple nodes, please set the interactive mode to "select-nodes". Then press the "Shift" key and click the nodes you want to select.'});(0,l.useEffect)(function(){T(),le&&le.current&&le.current.graph&&(le.current.graph.on("edge:contextmenu",function(p){L(p.item)}),le.current.graph.on("node:contextmenu",function(p){ce(p.item)}))},[]),(0,l.useEffect)(function(){_([])},[C.interactiveMode]),(0,l.useEffect)(function(){le.current&&le.current.graph&&(console.log("Updating layout: ",e.layout),le.current.graph.updateLayout(e.layout),le.current.graph.refreshPositions(),le.current.graph.fitView())},[e.layout]),(0,l.useEffect)(function(){var p=new Map,f=(0,te.Z)(r.nodes),k;try{for(f.s();!(k=f.n()).done;){var B=k.value;p.set(B.id,[])}}catch(he){f.e(he)}finally{f.f()}var U=(0,te.Z)(r.edges),ae;try{for(U.s();!(ae=U.n()).done;){var ie=ae.value;p.get(ie.source).push(ie.target),p.get(ie.target).push(ie.source)}}catch(he){U.e(he)}finally{U.f()}De(p)},[r]);var Ge=function(){h(!0)},Ce=function(){h(!1)},Ve=function(f){_(function(k){return[].concat((0,me.Z)(k),[f])})},A=function(){_([])},q=function(f){var k=f.data,B=f.style;console.log("HoverText: ",k);var U=kn(k,["comboId","degree","depth","layoutOrder","x","y","type","category"]),ae=Object.keys(U).map(function(ie){return U[ie]?(0,t.jsx)(M.Z.Item,{label:He.Z.titleCase(ie),style:{height:"50px",overflowY:"scroll"},children:U[ie]},ie):null});return ae.length>0?(0,t.jsx)(M.Z,{size:"small",column:1,title:null,bordered:!0,style:B,children:ae}):(0,t.jsx)("span",{style:B,children:"No Properties"})},Y={enabledStack:!0,filterCenter:!0},ee=function(f,k){console.log(f,k)},T=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"graphin-settings",k=JSON.parse(localStorage.getItem(f)||"{}");Object.keys(k).length===0?O(zr):(O(k),Q.ZP.success("Settings loaded"))};return r&&(0,t.jsxs)(ot.ZP,{ref:le,layoutCache:!0,options:Y,data:r,layout:e.layout,style:o,children:[(0,t.jsx)(Nr,{}),(0,t.jsx)(wr,{autoPin:C.autoPin}),(0,t.jsx)(kr,{}),(0,t.jsx)(Zr,{}),C.selectionMode=="lasso-select"?(0,t.jsx)(Er,{}):null,C.selectionMode=="brush-select"?(0,t.jsx)(Ir,{}):null,(0,t.jsx)(Mr,{visible:C.nodeLabelVisible}),(0,t.jsx)(Lr,{visible:C.edgeLabelVisible}),(0,t.jsx)(za.Z,{options:{},visible:x,handleEscListener:Ce}),(0,t.jsx)(Or,{selectedNode:d,mode:e.highlightMode}),C.interactiveMode=="show-paths"?(0,t.jsx)(Bn,{bindType:"node"}):null,C.interactiveMode=="show-paths"?(0,t.jsx)(Bn,{bindType:"edge"}):null,C.interactiveMode=="show-paths"?(0,t.jsx)(br,{}):null,(0,t.jsx)(At.Z,{style:{width:"160px"},children:(0,t.jsx)(Dr,{chatbotVisible:e.chatbotVisible,item:$,onChange:function(f,k,B,U){ce(null),i&&i(f,k,B,U)}})}),(0,t.jsx)(At.Z,{style:{width:"160px"},bindType:"canvas",children:(0,t.jsx)(Gr,{handleOpenFishEye:Ge,onCanvasClick:function(f,k,B){ce(null),L(null),u&&u(f,k,B)},onClearGraph:e.onClearGraph})}),(0,t.jsx)(At.Z,{style:{width:"160px"},bindType:"edge",children:(0,t.jsx)(Tr,{item:P,chatbotVisible:e.chatbotVisible,onChange:function(f,k,B,U,ae,ie){L(null),f.key=="explain-relationship"&&(L(U),I(!0)),s&&s(f,k,B,U,ae,ie)}})}),(0,t.jsx)(Vn,{bindType:"node",sortKey:"nlabel",children:function(f){return console.log("renderProps",f),(0,t.jsx)(Vn.Node,(0,m.Z)((0,m.Z)({},f),{},{onChange:ee}))}}),e.toolbarVisible?(0,t.jsx)(Rt,{title:"Settings",width:"220px",top:"100px",right:"30px",help:Te,children:(0,t.jsxs)(Ee.Z,{style:{position:"relative",marginBottom:"0px",opacity:.8},direction:"horizontal",children:[(0,t.jsx)(Ee.Z.Item,{children:(0,t.jsx)(w.Z,{style:{width:"100%"},allowClear:!0,defaultValue:e.layout.type,onChange:function(f){if(f=="auto")yr.n.predict(r).then(function(U){console.log("Predicted layout: ",U);var ae=mt.find(function(ie){return ie.type===U.predictLayout});ae?(Q.ZP.info("Predicted layout: ".concat(U.predictLayout)),e.changeLayout&&e.changeLayout(ae)):Q.ZP.error("Predicted layout is ".concat(U.predictLayout,", but it is not supported currently."))}).catch(function(U){console.log(U),Q.ZP.error("Failed to predict layout: ".concat(U.message))});else if(f=="graphin-force"){Q.ZP.warn("The layout '".concat(f,"' may not work well with the device which doesn't support GPU."));var k=mt.find(function(U){return U.type===f});e.changeLayout&&e.changeLayout(k)}else{var B=void 0;f?B=mt.find(function(U){return U.type===f}):B=mt.find(function(U){return U.type==="force"}),e.changeLayout&&B&&e.changeLayout(B)}},placeholder:"Select a layout",children:mt.map(function(p){var f=p.type;return(0,t.jsxs)(w.Z.Option,{value:f,children:[(0,t.jsx)(zt.Z,{}),"\xA0",f]},f)})})}),(0,t.jsx)(Ee.Z.Item,{children:(0,t.jsx)(w.Z,{style:{width:"100%"},allowClear:!0,value:C.interactiveMode,onChange:function(f){O((0,m.Z)((0,m.Z)({},C),{},{interactiveMode:f}))},placeholder:"Select a interactive mode",children:["show-details","select-nodes","show-paths"].map(function(p){return(0,t.jsxs)(w.Z.Option,{value:p,children:[(0,t.jsx)(zt.Z,{}),"\xA0",He.Z.titleCase(p)]},p)})})}),(0,t.jsx)(Ee.Z.Item,{children:(0,t.jsx)(w.Z,{style:{width:"100%"},allowClear:!0,defaultValue:"brush-select",disabled:C.interactiveMode!=="select-nodes",onChange:function(f){O((0,m.Z)((0,m.Z)({},C),{},{selectionMode:f}))},placeholder:"Select a selection mode",children:["brush-select","lasso-select"].map(function(p){return(0,t.jsxs)(w.Z.Option,{value:p,children:[(0,t.jsx)(zt.Z,{}),"\xA0",He.Z.titleCase(p)]},p)})})}),(0,t.jsxs)(Ee.Z.Item,{children:[(0,t.jsx)(Ie.Z,{onChange:function(f){O((0,m.Z)((0,m.Z)({},C),{},{autoPin:f}))},checked:C.autoPin,disabled:!0}),"Auto Pin"]}),(0,t.jsxs)(Ee.Z.Item,{children:[(0,t.jsx)(Ie.Z,{onChange:function(f){O((0,m.Z)((0,m.Z)({},C),{},{nodeLabelVisible:f}))},checked:C.nodeLabelVisible}),"Node Label"]}),(0,t.jsxs)(Ee.Z.Item,{children:[(0,t.jsx)(Ie.Z,{onChange:function(f){O((0,m.Z)((0,m.Z)({},C),{},{edgeLabelVisible:f}))},checked:C.edgeLabelVisible}),"Edge Label"]}),(0,t.jsxs)(Ee.Z.Item,{children:[(0,t.jsx)(Ie.Z,{onChange:function(f){O((0,m.Z)((0,m.Z)({},C),{},{nodeTooltipEnabled:f}))},checked:C.nodeTooltipEnabled}),"Node Tooltip"]}),(0,t.jsxs)(Ee.Z.Item,{children:[(0,t.jsx)(Ie.Z,{onChange:function(f){O((0,m.Z)((0,m.Z)({},C),{},{edgeTooltipEnabled:f}))},checked:C.edgeTooltipEnabled}),"Edge Tooltip"]}),(0,t.jsxs)(Ee.Z.Item,{children:[(0,t.jsx)(Ie.Z,{onChange:function(f){O((0,m.Z)((0,m.Z)({},C),{},{miniMapEnabled:f}))},checked:C.miniMapEnabled}),"MiniMap"]}),(0,t.jsxs)(Ee.Z.Item,{children:[(0,t.jsx)(Ie.Z,{onChange:function(f){O((0,m.Z)((0,m.Z)({},C),{},{snapLineEnabled:f}))},checked:C.snapLineEnabled}),"SnapLine"]}),(0,t.jsxs)(Ee.Z.Item,{children:[(0,t.jsx)(Ie.Z,{onChange:function(f){O((0,m.Z)((0,m.Z)({},C),{},{infoPanelEnabled:f}))},checked:C.infoPanelEnabled}),"Info Panel"]}),(0,t.jsx)(Ee.Z.Item,{children:(0,t.jsx)(W.Z,{type:"primary",size:"small",style:{width:"100%"},onClick:function(){localStorage.setItem("graphin-settings",JSON.stringify(C)),Q.ZP.success("Settings saved")},children:"Save Settings"})}),(0,t.jsx)(Ee.Z.Item,{children:(0,t.jsx)(W.Z,{danger:!0,size:"small",style:{width:"100%"},onClick:function(){T()},children:"Load Settings"})})]})}):null,(0,t.jsx)(Fr,{}),C.interactiveMode=="show-paths"?(0,t.jsx)(Un,{queriedId:e.queriedId,onClickNode:Ve,mode:"focus"}):null,C.interactiveMode=="select-nodes"?(0,t.jsx)(Un,{queriedId:e.queriedId,onClickNode:Ve,mode:"select"}):null,C.interactiveMode=="show-paths"?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(mr,{selectedNodes:V,nodes:r.nodes,edges:r.edges,onClosePathsFinder:A,adjacencyList:be,algorithm:r.edges.length>500?"bfs":"dfs"})}):null,P&&S?(0,t.jsxs)(Rt,{onClose:function(){I(!1)},children:["TODO: generate explanations for the current edge",(0,t.jsx)("br",{}),"1. Get the current edge, the source node and target node",(0,t.jsx)("br",{}),"2. Send the source node and target node to the backend and get the prompt (markdown format) which contains the prompt and api codes for retrieving context information",(0,t.jsx)("br",{}),"3. Send the markdown to the backend and get the filled markdown",(0,t.jsx)("br",{}),"4. Send the filled markdown to LLM and generate explanations by using `rethinking with retrieval` method",(0,t.jsx)("br",{}),"5. Show the filled markdown in the explanation panel",(0,t.jsx)("br",{})]}):null,C.interactiveMode=="select-nodes"?(0,t.jsx)(Cr,{multiple:!0,trigger:"shift"}):null,C.interactiveMode=="show-details"?(0,t.jsx)(Rr,{onClick:e.onClickNode}):null,C.interactiveMode=="show-details"?(0,t.jsx)(Ar,{onClick:e.onClickEdge}):null,C.nodeTooltipEnabled?(0,t.jsx)(zn,{bindType:"node",hasArrow:!0,placement:"bottom",style:{opacity:.9},children:function(f){if(f.model){var k=f.model;return(0,t.jsx)(q,{data:k,style:{padding:"10px",width:"fit-content",maxWidth:"400px"}})}return null}}):null,C.edgeTooltipEnabled?(0,t.jsx)(zn,{bindType:"edge",hasArrow:!0,placement:"bottom",style:{opacity:.9},children:function(f){if(f.model){var k=f.model;return(0,t.jsx)(q,{data:k,style:{padding:"10px",width:"fit-content"}})}return null}}):null,C.miniMapEnabled?(0,t.jsx)(xr,{}):null,C.snapLineEnabled?(0,t.jsx)(Sr,{options:Pr,visible:!0}):null,C.infoPanelEnabled?(0,t.jsx)(Xa,{data:e.statistics,style:{position:"absolute",top:"0px",left:"0px",zIndex:1}}):null,(0,t.jsx)(mn.Provider,{value:{graph:(n=le.current)===null||n===void 0?void 0:n.graph,apis:(a=le.current)===null||a===void 0?void 0:a.apis,selectedNodes:V},children:e.children?e.children:null})]})},Br=Vr,$e=c(39428),Ut=c(3182),Wt,Ur=function(e){var n=(0,l.useState)([]),a=(0,y.Z)(n,2),r=a[0],o=a[1],i=(0,l.useState)(!1),s=(0,y.Z)(i,2),d=s[0],u=s[1],Z=(0,l.useState)("Search Gene nodes ..."),b=(0,y.Z)(Z,2),x=b[0],h=b[1],N=(0,l.useState)(void 0),g=(0,y.Z)(N,2),S=g[0],I=g[1],j=(0,l.useState)("Gene"),G=(0,y.Z)(j,2),C=G[0],O=G[1],J=function(){var K=(0,Ut.Z)((0,$e.Z)().mark(function H($,ce){var Ze;return(0,$e.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:Wt&&(clearTimeout(Wt),Wt=null),Ze=function(){u(!0),e.getLabels({query_str:En({id:ce,name:ce},{},{}),label_type:$}).then(function(xe){var ye=xe.data,be=ye.map(function(le){return{value:le.id,text:"".concat(le.id," | ").concat(le.name)}});console.log("getLabels results: ",be);var De=be.map(function(le){return{label:le.text,value:le.value}});u(!1),I(De)}).catch(function(xe){console.log("requestNodes Error: ",xe),I([]),u(!1)})},Wt=setTimeout(Ze,300);case 3:case"end":return V.stop()}},H)}));return function($,ce){return K.apply(this,arguments)}}(),D=function(H){O(H),I(void 0),h("Search ".concat(H," nodes ..."))},P=function(H){H?J(C,H):I(void 0)},L=function(H){if(console.log("Handle Change: ",H),H){var $;($=e.onChange)===null||$===void 0||$.call(e,C,H)}else{var ce;(ce=e.onChange)===null||ce===void 0||ce.call(e,C,void 0)}};return(0,l.useEffect)(function(){e.getNodeTypes().then(function(K){console.log("Get types of nodes: ",K);var H=[];K.node_types?(K.node_types.forEach(function($){H.push({order:0,label:$,value:$})}),o(H)):o([])}).catch(function(K){console.log("Get types of nodes error: ",K),o([])})},[]),(0,t.jsxs)(X.Z,{className:"query-builder",children:[(0,t.jsx)(w.Z,{value:C,style:{width:"auto",minWidth:"100px"},options:r,onSelect:D}),(0,t.jsx)(w.Z,{showSearch:!0,allowClear:!0,loading:d,defaultActiveFirstOption:!1,showArrow:!0,placeholder:x,onSearch:P,onChange:L,options:S,filterOption:!1,notFoundContent:(0,t.jsx)(ke.Z,{description:d?"Searching...":S!==void 0?"Not Found":"Enter your interested ".concat(C," ...")})}),(0,t.jsx)(W.Z,{onClick:e.onAdvancedSearch,children:"Advanced"})]})},Wr=Ur,kl=c(58996),Kr=c(77933),Hr=c(91966),Wn=c.n(Hr),$r=["leftColumns","rightColumns"],_r=[{node_id:"MESH:D002289",node_type:"Disease"},{node_id:"MESH:D015673",node_type:"Disease"}],Qr=function(){var e="node_id,node_type",n=_r.map(function(i){return"".concat(i.node_id,",").concat(i.node_type)});n.unshift(e);var a="data:text/csv;charset=utf-8,"+n.join(`
`),r=encodeURI(a),o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download","example.csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o)},Yr=[{dataIndex:"node_id",title:"ID",align:"center"},{dataIndex:"node_type",title:"Type",align:"center"},{dataIndex:"matched_id",title:"Matched ID",align:"center"},{dataIndex:"matched_name",title:"Matched Name",align:"center"},{dataIndex:"disabled",title:"Status",align:"center",render:function(e){return(0,t.jsx)(Fe.Z,{children:e?"Not Matched":"Matched"})}}],Jr=[{dataIndex:"node_id",title:"Raw ID",align:"center"},{dataIndex:"matched_id",title:"Matched ID",align:"center"}],Xr=function(e){var n=e.leftColumns,a=e.rightColumns,r=(0,jn.Z)(e,$r);return(0,t.jsx)(Kr.Z,(0,m.Z)((0,m.Z)({},r),{},{children:function(i){var s=i.direction,d=i.filteredItems,u=i.onItemSelectAll,Z=i.onItemSelect,b=i.selectedKeys,x=i.disabled,h=s==="left"?n:a,N={getCheckboxProps:function(S){return{disabled:x||S.disabled}},onSelectAll:function(S,I){var j=I.filter(function(C){return!C.disabled}).map(function(C){var O=C.key;return O}),G=S?Wn()(j,b):Wn()(b,j);u(G,S)},onSelect:function(S,I){var j=S.key;Z(j,I)},selectedRowKeys:b};return(0,t.jsx)(Ye.Z,{rowSelection:N,columns:h,dataSource:d,size:"small",style:{pointerEvents:x?"none":void 0},onRow:function(S){var I=S.key,j=S.disabled;return{onClick:function(){j||x||Z(I,!b.includes(I))}}}})}}))},qr=function(e){var n=(0,l.useState)([]),a=(0,y.Z)(n,2),r=a[0],o=a[1],i=function(){if(r.length===0){Q.ZP.warn("Please select at least one node from the left table.");return}else{var u;(u=e.onOk)===null||u===void 0||u.call(e,{node_ids:r,merge_mode:"append",mode:"batchIds"})}},s=function(u){o(u),console.log("targetKeys: ",u)};return(0,t.jsxs)(X.Z,{className:"transfer-table",children:[(0,t.jsx)(Xr,{dataSource:e.dataSource,targetKeys:r,showSearch:!0,onChange:s,filterOption:function(u,Z){return Z.node_id.indexOf(u)!==-1||Z.node_type.indexOf(u)!==-1},leftColumns:Yr,rightColumns:Jr}),(0,t.jsxs)(X.Z,{className:"button-group",children:[(0,t.jsx)(W.Z,{type:"link",onClick:function(){Qr()},children:"Download Example File"}),(0,t.jsx)(W.Z,{onClick:e.onCancel,children:"Cancel"}),(0,t.jsx)(W.Z,{type:"primary",onClick:i,children:"Search"})]})]})},eo=qr,El=c(43185),Kn=c(11324),Hn=c(84391),to=c(57460),no=c.n(to),ao=function(e){var n=(0,l.useState)([]),a=(0,y.Z)(n,2),r=a[0],o=a[1],i=function(u){var Z=u.reduce(function(h,N){var g=N.node_type,S=N.node_id;return h[g]?h[g].push(S):h[g]=[S],h},{}),b=Object.keys(Z);console.log("UploadNode fetch: ",Z,b);var x=b.map(function(h){return e.getLabels({query_str:"{:select [:*] :where [:in :id ".concat(JSON.stringify(Z[h]),"]}"),label_type:h})});return Promise.all(x)};(0,l.useEffect)(function(){e.onUpload(r)},[r]);var s={name:"file",action:"/api/upload",showUploadList:!1,beforeUpload:function(u){var Z=new FileReader;return Z.readAsText(u),Z.onload=function(){no().parse(Z.result,{complete:function(x){var h=[];x.data.length>=100?(Q.ZP.warn("The number of nodes should be less than 100, we will only use the first 100 nodes."),h=x.data.slice(0,100)):h=x.data;var N=h.map(function(O,J){return J===0?O.map(function(D){return(0,Xe.Z)({},D,null)}):O.reduce(function(D,P,L){return D[h[0][L]]=P,D},{})});Q.ZP.success("Successfully parsed CSV data");var g=N.filter(function(O){return O.node_id&&O.node_type});console.log("Parsed CSV data:",N,g);var S=[],I=(0,te.Z)(g),j;try{for(I.s();!(j=I.n()).done;){var G=j.value;S.push({key:G.node_id,node_id:G.node_id,node_type:G.node_type})}}catch(O){I.e(O)}finally{I.f()}var C=(0,se.uniqBy)(S,function(O){return"".concat(O.node_id,"-").concat(O.node_type)});qt.Z.info({message:"Found duplicated nodes",description:"The number of nodes is ".concat(S.length,", the number of unique nodes is ").concat(C.length)}),console.log("selectedData: ",S,C),S=C,S.length>0?i(S).then(function(O){var J=(0,se.flatten)(O.map(function(P,L){return P.data})),D=S.map(function(P,L){var K=J.find(function(H){return"".concat(H.id)===P.node_id});return K?{key:P.node_id,node_id:P.node_id,node_type:P.node_type,matched_id:K.id,matched_name:K.name,disabled:!1}:{key:P.node_id,node_id:P.node_id,node_type:P.node_type,matched_id:"",matched_name:"",disabled:!0}});o(D)}).catch(function(O){console.log(O)}):Q.ZP.error("No satisfied data in the uploaded file")},error:function(x){Q.ZP.error("Failed to parse CSV data")}})},Z.onerror=function(b){Q.ZP.error("Failed to read file")},!1}};return(0,t.jsx)(Kn.Z,(0,m.Z)((0,m.Z)({},s),{},{children:(0,t.jsx)(W.Z,{icon:(0,t.jsx)(Hn.Z,{}),children:"Upload"})}))},ro=ao,Il=c(77883),$n=c(49747),Pl=c(88983),yt=c(47933),Tl=c(9715),fe=c(55843),Kt,oo=[{label:"Replace",value:"replace"},{label:"Append",value:"append"},{label:"Subtract",value:"subtract"}],io=[{label:"Query n nodes for each node",value:"each"},{label:"Query n nodes for all nodes",value:"total"}],lo=[{label:"1 Step",value:1},{label:"2 Steps",value:2},{label:"3 Steps",value:3},{label:"4 Steps",value:4},{label:"5 Steps",value:5}],so=function(e){var n,a,r=fe.Z.useForm(),o=(0,y.Z)(r,1),i=o[0],s=fe.Z.useWatch("mode",i),d=fe.Z.useWatch("node_id",i),u=fe.Z.useWatch("node_type",i),Z=fe.Z.useWatch("enable_prediction",i),b=fe.Z.useWatch("nsteps",i),x=fe.Z.useWatch("relation_types",i),h=(0,l.useState)([]),N=(0,y.Z)(h,2),g=N[0],S=N[1],I=(0,l.useState)(!1),j=(0,y.Z)(I,2),G=j[0],C=j[1],O=(0,l.useState)(nr(e.edgeStat)),J=(0,y.Z)(O,2),D=J[0],P=J[1],L=(0,l.useState)(""),K=(0,y.Z)(L,2),H=K[0],$=K[1],ce=(0,l.useState)("Search nodes ..."),Ze=(0,y.Z)(ce,2),pe=Ze[0],V=Ze[1],_=(0,l.useState)(void 0),xe=(0,y.Z)(_,2),ye=xe[0],be=xe[1];(0,l.useEffect)(function(){e.getNodeTypes().then(function(T){console.log("Get types of nodes: ",T);var p=[];T.node_types?(T.node_types.forEach(function(f){p.push({order:0,label:f,value:f})}),S(p)):S([])}).catch(function(T){console.log("requestNodes Error: ",T),Q.ZP.error("Get types of nodes error, please refresh the page"),S([])})},[]),(0,l.useEffect)(function(){var T,p,f,k,B,U,ae,ie="replace";(T=e.searchObject)!==null&&T!==void 0&&T.merge_mode&&(ie=e.searchObject.merge_mode);var he={};if(console.log("props.searchObject: ",e.searchObject),(p=e.searchObject)!==null&&p!==void 0&&p.limit||(he=(0,m.Z)((0,m.Z)({},he),{},{limit:50})),(f=e.searchObject)!==null&&f!==void 0&&f.topk||(he=(0,m.Z)((0,m.Z)({},he),{},{topk:10})),(k=e.searchObject)!==null&&k!==void 0&&k.query_mode||(he=(0,m.Z)((0,m.Z)({},he),{},{query_mode:"each"})),(B=e.searchObject)!==null&&B!==void 0&&B.nsteps||(he=(0,m.Z)((0,m.Z)({},he),{},{nsteps:1})),e.searchObject)for(var Le in e.searchObject)e.searchObject[Le]&&(he=(0,m.Z)((0,m.Z)({},he),{},(0,Xe.Z)({},Le,e.searchObject[Le])));he=(0,m.Z)((0,m.Z)({},he),{},{merge_mode:ie}),i.setFieldsValue(he),(U=e.searchObject)!==null&&U!==void 0&&U.node_type&&(ae=e.searchObject)!==null&&ae!==void 0&&ae.node_id&&Ge(e.searchObject.node_type,e.searchObject.node_id)},[e.searchObject]),(0,l.useEffect)(function(){return x&&x.length===0?s==="path"||b>1?$("Use all relation types instead of none, but it may take a long time to search."):$(Z?"Please select at least one relation type for performance if you enable prediction.":""):$(""),function(){$("")}},[Z,b,x]),(0,l.useEffect)(function(){d&&De(d,"node",function(T){if(console.log("fetchRelationshipTypes within node mode: ",T),T.length>0){var p=D==null?void 0:D.map(function(f){var k=T.find(function(U){var ae=U.label.split(" ")[1],ie=f.label.split(" ")[1];return ie===ae});if(k)return k;var B=f.label.split(" ")[1];return{order:9999,label:"[".concat("0".padStart(4,"0"),"] ").concat(B),value:f.value}});console.log("Update the number of relationships: ",p),P(p==null?void 0:p.sort(function(f,k){return f.order-k.order}))}})},[d]);var De=function(){var T=(0,Ut.Z)((0,$e.Z)().mark(function p(f,k,B){var U,ae,ie,he;return(0,$e.Z)().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:U="",ae="",ie="",k=="node"&&f?(U=':where [:or [:= :start_id "'.concat(f,`"]
                                  [:= :end_id "`).concat(f,'"]]'),ae="[[:count :*] :ncount]",ie="[[:ncount :desc]]"):k=="nodeType"&&f?(U=':where [:or [:= :source_type "'.concat(f,`"]
                                  [:= :target_type "`).concat(f,'"]]'),ae="[[:count :*] :ncount]",ie="[[:ncount :desc]]"):fail("Invalid query type or query string."),he=`
    {:select [`.concat(ae,` [:_type :relationship_type] 
              [:source_type :source_type] [:target_type :target_type] 
              [:resource :resource]]
      :from :relationships
      `).concat(U,`
      :group-by [:relationship_type :source_type :target_type :resource]
      :order-by `).concat(ie,`}
    `),e.getRelationships({query_str:he,disable_total:"true"}).then(function(Oe){console.log("Get relationships: ",Oe);var qe=[];if(Oe.data.length>0){var Be=Dn(Oe.data.map(function(Re){return Re.ncount}));Oe.data.forEach(function(Re,nn){var xt=Pn(Re.relationship_type,Re.resource,Re.source_type,Re.target_type);qe.push({order:nn,label:"[".concat(Re.ncount.toString().padStart(Be,"0"),"] ").concat(xt),value:xt})}),B(qe)}else B([])}).catch(function(Oe){Q.ZP.error("Get relationships error, please refresh the page and try again."),console.log("Get relationships error: ",Oe),B([])});case 6:case"end":return Qe.stop()}},p)}));return function(f,k,B){return T.apply(this,arguments)}}(),le=function(){var T=(0,Ut.Z)((0,$e.Z)().mark(function p(f,k,B){var U;return(0,$e.Z)().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:Kt&&(clearTimeout(Kt),Kt=null),U=function(){C(!0),e.getLabels({query_str:En({id:k,name:k},{},{}),label_type:f}).then(function(Le){var Qe=Le.data,Oe=Qe.map(function(Be){return{value:Be.id,text:"".concat(Be.id," | ").concat(Be.name)}});console.log("getLabels results: ",Oe);var qe=Oe.map(function(Be){return{label:Be.text,value:Be.value}});C(!1),B(qe)}).catch(function(Le){console.log("requestNodes Error: ",Le),B([]),C(!1)})},Kt=setTimeout(U,300);case 3:case"end":return ie.stop()}},p)}));return function(f,k,B){return T.apply(this,arguments)}}(),Te=function(p){be(void 0),V("Search ".concat(p," nodes ..."))},Ge=function(p,f){f?le(p,f,be):be(void 0)},Ce=function(){$("")},Ve=function(){i.validateFields().then(function(p){if(console.log("onConfirm form values: ",p),e.onOk){var f,k=(0,m.Z)((0,m.Z)({},p),{},{all_relation_types:D?D.map(function(B){return B.value}):[],enable_prediction:p.enable_prediction?p.enable_prediction:!1,relation_types:p.relation_types?p.relation_types:[],nodes:(f=e.searchObject)===null||f===void 0?void 0:f.nodes});e.onOk(k)}}).catch(function(p){console.log("errorInfo: ",p)})},A=s=="node",q=s=="batchIds",Y=s=="similarity",ee=s=="batchNodes";return(0,t.jsxs)(fe.Z,{className:"query-form",layout:"horizontal",form:i,labelCol:{span:7},wrapperCol:{span:17},children:[(0,t.jsx)(fe.Z.Item,{name:"mode",label:"Mode",initialValue:"node",children:(0,t.jsxs)(yt.ZP.Group,{children:[(0,t.jsx)(yt.ZP,{value:"node",children:"Relationship"}),(0,t.jsx)(yt.ZP,{value:"batchIds",children:"Nodes"}),(0,t.jsx)(yt.ZP,{value:"similarity",children:"Similarity"}),((n=e.searchObject)===null||n===void 0?void 0:n.nodes)&&((a=e.searchObject)===null||a===void 0?void 0:a.nodes.length)>0&&(0,t.jsx)(yt.ZP,{value:"batchNodes",children:"BatchExpand"})]})}),(0,t.jsx)(fe.Z.Item,{label:"Node Type",name:"node_type",rules:[{required:!0,message:"Please select a node type."}],children:(0,t.jsx)(w.Z,{allowClear:!0,defaultActiveFirstOption:!1,showArrow:!0,placeholder:"Please select a node type",options:g,filterOption:!0,onSelect:Te})}),(0,t.jsx)(fe.Z.Item,{label:"Which Nodes",name:"node_ids",hidden:!q,rules:[{required:!!q,message:"Please enter your expected nodes."}],children:(0,t.jsx)(w.Z,{showSearch:!0,allowClear:!0,loading:G,mode:"multiple",defaultActiveFirstOption:!1,showArrow:!0,placeholder:pe,onSearch:function(p){return Ge(u,p)},options:ye,filterOption:!1,notFoundContent:(0,t.jsx)(ke.Z,{description:G?"Searching...":ye!==void 0?"Not Found":"Enter your interested ".concat(u," ...")})})}),(0,t.jsx)(fe.Z.Item,{label:"Which Node",name:"node_id",hidden:q||ee,rules:[{required:!(q||ee),message:"Please enter your expected node."}],children:(0,t.jsx)(w.Z,{showSearch:!0,allowClear:!0,loading:G,defaultActiveFirstOption:!1,showArrow:!0,placeholder:pe,onSearch:function(p){return Ge(u,p)},options:ye,filterOption:!1,notFoundContent:(0,t.jsx)(ke.Z,{description:G?"Searching...":ye!==void 0?"Not Found":"Enter your interested ".concat(u," ...")})})}),(0,t.jsx)(fe.Z.Item,{name:"relation_types",label:"Relation Types",hidden:q||Y,validateStatus:H?"warning":"",help:H,rules:[{required:!1,message:"Please select your expected relation types!",type:"array"}],children:(0,t.jsx)(w.Z,{mode:"multiple",onChange:Ce,filterOption:function(p,f){return f.label.toLowerCase().indexOf(p.toLowerCase())>=0},allowClear:!0,autoClearSearchValue:!1,placeholder:"Please select relation types",options:D})}),(0,t.jsx)(fe.Z.Item,{label:"Query Mode",name:"query_mode",hidden:!ee,children:(0,t.jsx)(w.Z,{placeholder:"Please select query mode",options:io})}),(0,t.jsx)(fe.Z.Item,{name:"nsteps",label:"Num of Steps",hidden:q||Y||ee,rules:[{required:!1,message:"Please select your expected nsteps",type:"number"}],children:(0,t.jsx)(w.Z,{placeholder:"Please select nsteps",options:lo})}),(0,t.jsx)(fe.Z.Item,{name:"limit",label:"Max Num of Nodes",hidden:q||Y,rules:[{required:!1,message:"Please input your expected value",type:"number"}],children:(0,t.jsx)($n.Z,{min:1,max:500})}),(0,t.jsx)(fe.Z.Item,{label:"Enable Prediction",name:"enable_prediction",hidden:q||Y||ee,valuePropName:"checked",children:(0,t.jsx)(Ie.Z,{})}),(0,t.jsx)(fe.Z.Item,{name:"topk",label:"Top K",hidden:q||ee,rules:[{required:!1,message:"Please input your expected value",type:"number"}],children:(0,t.jsx)($n.Z,{min:1,max:100})}),(0,t.jsx)(fe.Z.Item,{label:"Merging Mode",name:"merge_mode",children:(0,t.jsx)(w.Z,{placeholder:"Please select mode for merging nodes & relationships",options:oo})}),(0,t.jsxs)(fe.Z.Item,{wrapperCol:{offset:19,span:5},children:[(0,t.jsx)(W.Z,{style:{marginRight:"10px"},onClick:e.onCancel,children:"Cancel"}),(0,t.jsx)(W.Z,{type:"primary",onClick:Ve,children:"Search"})]})]})},co=so,uo=function(e){return(0,t.jsxs)("div",{className:"question-queryer",children:[(0,t.jsx)("h3",{children:"Question:"}),(0,t.jsx)(Bt.Z.TextArea,{rows:4,placeholder:"Please input your question",maxLength:6}),(0,t.jsx)("h3",{children:"Query (generated by AI):"}),(0,t.jsx)(Bt.Z.TextArea,{rows:4,placeholder:"Wait for your input...",maxLength:6}),(0,t.jsxs)("div",{className:"button-group",children:[(0,t.jsx)(W.Z,{onClick:e.onCancel,children:"Cancel"}),(0,t.jsx)(W.Z,{type:"primary",onClick:function(){e.onOk&&e.onOk({})},children:"Search"})]})]})},fo=uo,ho=function(e){var n=(0,l.useState)("single"),a=(0,y.Z)(n,2),r=a[0],o=a[1],i=(0,l.useState)([]),s=(0,y.Z)(i,2),d=s[0],u=s[1],Z=[{label:"Single Query",key:"single",children:(0,t.jsx)(co,(0,m.Z)({edgeStat:e.edgeStat,onCancel:e.onCancel,onOk:e.onOk,searchObject:e.searchObject},e.apis))},{label:"Batch Query",key:"batch",children:(0,t.jsx)(eo,{dataSource:d,onOk:e.onOk,onCancel:e.onCancel})},{label:"Ask Question",key:"question",children:(0,t.jsx)(fo,{onCancel:e.onCancel,onOk:e.onOk})}];return(0,t.jsx)(tt.Z,{className:"advanced-search",title:"Advanced Search",onCancel:e.onCancel,open:e.visible,destroyOnClose:!0,footer:null,getContainer:e.parent?e.parent:document.body,children:(0,t.jsx)(ve.Z,{defaultActiveKey:"single",activeKey:r,tabPosition:"left",items:Z,destroyInactiveTabPane:!0,onChange:function(x){o(x)},tabBarExtraContent:r==="batch"?(0,t.jsx)(ro,{onUpload:function(x){u(x)},getLabels:e.apis.getLabels}):null})})},vo=ho,_n=c(25478),po=c(66979),go=c.n(po),mo=c(58660),yo=c(74310),xo=c(75503),So=function(e){var n=e.plotlyData,a=e.handleUpdate,r=e.mode,o=(0,l.useRef)(null),i=function(g,S,I){a&&a({data:g,layout:S,frames:I})},s=function(g,S,I){a&&a({data:g,layout:S,frames:I})},d=function(){console.log("PlotlyViewer handleResize: ",e.forceResize,o);var g=document.querySelector("#".concat(e.divId));e.divId&&e.forceResize&&g&&_n.relayout(e.divId,{autosize:!0})};(0,l.useEffect)(function(){if(e.divId&&e.forceResize){var N=document.querySelector("#".concat(e.divId)),g=new ResizeObserver(function(S){var I=(0,te.Z)(S),j;try{for(I.s();!(j=I.n()).done;){var G=j.value;console.log("Element size changed to ".concat(G.contentRect.width,"x").concat(G.contentRect.height)),G.target==N&&(console.log("Parent size changed"),d())}}catch(C){I.e(C)}finally{I.f()}});return N&&g.observe(N),function(){return g.disconnect()}}else return function(){}},[o]);var u={toImageButtonOptions:{format:"svg",filename:"custom_image",height:1e3,width:1e3,scale:1},editable:!0,scrollZoom:!1,displaylogo:!1,displayModeBar:!0,showTips:!0,responsive:!0,locales:{"zh-CN":xo},locale:(0,yo.Kd)()};console.log("PlotlyViewer updated: ",e);var Z=n||{data:[],layout:{}},b=Z.data,x=Z.layout,h=Z.frames;return x=(0,m.Z)((0,m.Z)({},x),{},{margin:{t:50,r:50,b:50,l:50}}),r==="Plotly"?(0,t.jsx)(mo.Z,{ref:o,divId:e.divId,useResizeHandler:!0,className:"plotly-viewer",data:b,layout:(0,m.Z)((0,m.Z)({},x),{},{autosize:!0}),config:u,onClick:e.onClick,frames:h}):(0,t.jsx)("div",{className:"plotly-editor",children:(0,t.jsx)(go(),{ref:o,divId:e.divId,data:b,layout:(0,m.Z)((0,m.Z)({},x),{},{autosize:!0}),config:u,frames:h,plotly:_n,onClick:e.onClick,onUpdate:i,onRender:s,useResizeHandler:!0,advancedTraceTypeSelector:!0})})},Ht=(0,l.memo)(So),_e=function(e,n,a,r){return{title:{text:e,font:{family:"Arial",size:"1.3rem",color:"#333333"},xref:"paper",x:0},xaxis:{zeroline:!0,zerolinecolor:"#333333",zerolinewidth:1,tickangle:315,title:{text:n,font:{family:"Arial",size:"1.1rem",color:"#333333"}},tickfont:{family:"Arial",size:"1rem",color:"#333333"},showgrid:!1,margin:{l:50,r:50,b:50,t:50,pad:4},automargin:r},yaxis:{title:{text:a,font:{family:"Arial",size:"1.1rem",color:"#333333"}},tickfont:{family:"Arial",size:"1rem",color:"#333333"},showgrid:!1,zeroline:!0,zerolinecolor:"#333333",zerolinewidth:1,margin:{l:50,r:50,b:50,t:50,pad:4},automargin:r},plot_bgcolor:"#ffffff",paper_bgcolor:"#ffffff"}},Zo=function(e){var n=e.data,a=(0,l.useState)([]),r=(0,y.Z)(a,2),o=r[0],i=r[1];(0,l.useEffect)(function(){if(n.nodes.length!==0){var d=n.nodes,u=n.edges,Z=(0,se.uniqBy)(d,"nlabel").map(function(g){return g.nlabel}),b=(0,se.uniqBy)(u,"reltype").map(function(g){return g.reltype}),x=Z.map(function(g){return{type:g,count:d.filter(function(S){return S.nlabel===g}).length}}),h=b.map(function(g){return{type:g,count:u.filter(function(S){return S.reltype===g}).length}}),N=[];N.push({data:[{x:x.map(function(g){return g.type}),y:x.map(function(g){return g.count}),type:"bar",name:"Node Type Count",marker:{color:"#0083ff"}}],layout:_e("Node Type Count","Node Type","Count",!1)}),N.push({data:[{x:h.map(function(g){return g.type}),y:h.map(function(g){return g.count}),type:"bar",name:"Edge Type Count",marker:{color:"#0083ff"}}],layout:_e("Edge Type Count","Edge Type","Count",!1)}),i(N)}},[n]);var s=function(u){for(var Z="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",x=b.length,h=0;h<u;)Z+=b.charAt(Math.floor(Math.random()*x)),h+=1;return Z};return(0,t.jsx)(X.Z,{className:"complex-chart",children:o.length===0?(0,t.jsx)(we.Z,{span:24,children:(0,t.jsx)(ke.Z,{})}):o.map(function(d,u){return(0,t.jsx)(we.Z,{span:12,style:{height:"400px"},children:(0,t.jsx)(Ht,{mode:"Plotly",plotlyData:d,divId:"".concat(s(5)),forceResize:!0})},u)})})},bo=Zo,Dl=c(7359),tn=c(27279),$t=function(e,n){return e.reduce(function(a,r){return(a[r[n]]=a[r[n]]||[]).push(r),a},{})},Qn=function(e,n,a,r){return e.forEach(function(o){o[r]=o[n]+"_"+o[a]}),e},Co=function(e,n,a,r){var o=e.reduce(function(i,s){var d="".concat(s[n],"-").concat(s[a]);if(!i[d]){var u;i[d]=(u={},(0,Xe.Z)(u,n,s[n]),(0,Xe.Z)(u,a,s[a]),(0,Xe.Z)(u,r,0),u)}return i[d][r]+=s[r],i},{});return Object.values(o)},Yn=function(e,n,a,r){var o=Object.values(e.reduce(function(i,s){var d=He.Z.snakeCase(s[n]);if(!i[d]){var u={};u[n]=s[n],i[d]=u}var Z=He.Z.snakeCase(s[a]);return i[d][Z]=s[r],i},{}));return o},Jn=function(e){return e.reduce(function(n,a){return a.map(function(r,o){return(n[o]||[]).concat(a[o])})},[])},jo=function(e){var n=e.nodeStat,a=e.edgeStat,r=(0,l.useState)([]),o=(0,y.Z)(r,2),i=o[0],s=o[1],d=(0,l.useState)([]),u=(0,y.Z)(d,2),Z=u[0],b=u[1];(0,l.useEffect)(function(){if(n.length!==0&&a.length!==0){var h=[],N=n.reduce(function(V,_){return V+_.node_count},0),g=a.reduce(function(V,_){return V+_.relation_count},0);console.log("Node Count: ",N,"Edge Count: ",g),h.push({data:[{labels:["Node Count","Edge Count"],values:[N,g],type:"pie",textinfo:"value"}],layout:(0,m.Z)({},_e("Total Count","Type","Count",!0))});var S=$t(n,"source"),I=Object.keys(S).map(function(V){return{x:S[V].map(function(_){return _.node_type}),y:S[V].map(function(_){return _.node_count}),type:"bar",name:V}});h.push({data:I,layout:(0,m.Z)((0,m.Z)({},_e("Node Count","Node Type","Count",!0)),{},{barmode:"stack"})}),S=$t(n,"node_type"),I=Object.keys(S).map(function(V){return{x:S[V].map(function(_){return _.source}),y:S[V].map(function(_){return _.node_count}),type:"bar",name:V}}),h.push({data:I,layout:(0,m.Z)((0,m.Z)({},_e("Node Count","Source","Count",!0)),{},{barmode:"stack"})});var j=$t(Qn(a,"start_node_type","end_node_type","rel"),"rel"),G=Object.keys(j).map(function(V){return{x:j[V].map(function(_){return _.source}),y:j[V].map(function(_){return _.relation_count}),type:"bar",name:V}});h.push({data:G,layout:(0,m.Z)((0,m.Z)({},_e("Relation Count","Source","Count",!0)),{},{barmode:"stack"})}),j=$t(Qn(a,"start_node_type","end_node_type","rel"),"source"),G=Object.keys(j).map(function(V){return{x:j[V].map(function(_){return _.rel}),y:j[V].map(function(_){return _.relation_count}),type:"bar",name:V}}),h.push({data:G,layout:(0,m.Z)((0,m.Z)({},_e("Relation Count","Relationship Type","Count",!0)),{},{barmode:"stack"})}),s(h);var C="grey",O="lightgrey",J="white",D=[],P=Yn(n,"node_type","source","node_count"),L=Array.from(new Set(n.map(function(V){return V.source}))),K=Jn(P.map(function(V){var _=[V.node_type];return _.concat(L.map(function(xe){var ye=He.Z.snakeCase(xe);return V[ye]===void 0?0:V[ye]}))})),H=K[0].length,$=Array.from({length:H},function(V,_){return _%2==0?O:J}),ce={type:"table",header:{values:["Node Type"].concat(L),align:["center","center"],line:{width:1,color:"black"},fill:{color:C},font:{family:"Arial",size:12,color:"white"}},cells:{values:K,align:["center","center"],line:{color:"black",width:1},fill:{color:[$]},font:{family:"Arial",size:11,color:["black"]},height:30,format:[[void 0,void 0],[void 0,",d"]]}};console.log("Table: ",ce,P,L,K),D.push({data:[ce],layout:{title:"Node Count"}});var Ze=Co(a,"source","relation_type","relation_count");P=Yn(Ze,"relation_type","source","relation_count"),L=Array.from(new Set(a.map(function(V){return V.source}))),K=Jn(P.map(function(V){var _=[V.relation_type];return _.concat(L.map(function(xe){var ye=He.Z.snakeCase(xe);return V[ye]===void 0?0:V[ye]}))})),H=K[0].length,$=Array.from({length:H},function(V,_){return _%2==0?O:J});var pe={type:"table",header:{values:["Relationship Type"].concat(L),align:["center","center"],line:{width:1,color:"black"},fill:{color:C},font:{family:"Arial",size:12,color:"white"}},cells:{values:K,align:["center","center"],line:{color:"black",width:1},fill:{color:[$]},font:{family:"Arial",size:11,color:["black"]},height:30,format:[[void 0,void 0],[void 0,",d"]]},columnwidth:Array.from({length:L.length},function(V,_){return _==0?150:50})};console.log("Table: ",pe,P,L,K),D.push({data:[pe],layout:{title:"Relationship Count"}}),b(D)}},[n,a]);var x=function(N){for(var g="",S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",I=S.length,j=0;j<N;)g+=S.charAt(Math.floor(Math.random()*I)),j+=1;return g};return(0,t.jsxs)(tn.Z,{defaultActiveKey:["charts","tables"],children:[(0,t.jsx)(tn.Z.Panel,{header:"Charts",children:(0,t.jsx)(X.Z,{className:"complex-chart",children:i.length===0?(0,t.jsx)(we.Z,{span:24,children:(0,t.jsx)(ke.Z,{})}):i.map(function(h,N){return(0,t.jsx)(we.Z,{span:12,style:{height:"350px",marginBottom:"10px"},children:(0,t.jsx)(Ht,{mode:"Plotly",plotlyData:h,divId:"".concat(x(5)),forceResize:!0})},N)})})},"charts"),(0,t.jsx)(tn.Z.Panel,{header:"Tables",children:(0,t.jsx)(X.Z,{className:"complex-chart",children:Z.length===0?(0,t.jsx)(we.Z,{span:24,children:(0,t.jsx)(ke.Z,{})}):Z.map(function(h,N){return(0,t.jsx)(we.Z,{span:24,style:{height:"350px",marginBottom:"10px"},children:(0,t.jsx)(Ht,{mode:"Plotly",plotlyData:h,divId:"".concat(x(5)),forceResize:!0})},N)})})},"tables")]})},No=jo,wo=function(e){var n=e.node,a=(0,l.useState)(void 0),r=(0,y.Z)(a,2),o=r[0],i=r[1];return(0,l.useEffect)(function(){},[n]),(0,t.jsxs)(ve.Z,{className:"disease-info-panel",children:[(0,t.jsx)(ve.Z.TabPane,{tab:"Disease Info",children:"Comming Soon..."},"disease-info"),(0,t.jsx)(ve.Z.TabPane,{tab:"Clinical Trials",children:(0,t.jsx)("img",{width:"100%",src:"/examples/clinical-trials.png"})},"clinical-trails")]})},ko=wo,Eo=function(e){var n=e.node,a=(0,l.useState)(void 0),r=(0,y.Z)(a,2),o=r[0],i=r[1];return(0,l.useEffect)(function(){},[n]),(0,t.jsxs)(ve.Z,{className:"drug-info-panel",children:[(0,t.jsx)(ve.Z.TabPane,{tab:"Drug Info",children:"Comming Soon..."},"drug-info"),(0,t.jsx)(ve.Z.TabPane,{tab:"3D Structure",children:"Comming Soon..."},"drug-3d")]})},Io=Eo,Po=function(e){var n=e.split(":"),a=(0,y.Z)(n,2),r=a[0],o=a[1];return o?{source:r,id:o}:{source:"unknown",id:r}},To=function(e){var n=Po(e),a=n.id;return a},Do=function(e){var n=e.node,a=(0,l.useState)(void 0),r=(0,y.Z)(a,2),o=r[0],i=r[1],s=(0,l.useState)([{label:"Summary",key:"summary",checked:!0},{label:"Gene",key:"gene",checked:!0},{label:"Transcript",key:"transcript",checked:!0},{label:"Mutation",key:"mutation",checked:!0},{label:"3D Structure",key:"structure",checked:!0},{label:"Sgrna",key:"sgrna",checked:!0}]),d=(0,y.Z)(s,2),u=d[0],Z=d[1],b=(0,l.useState)([]),x=(0,y.Z)(b,2),h=x[0],N=x[1];(0,l.useEffect)(function(){if(n){var I=To(n.data.id);e.getGeneInfo(I).then(function(j){i(j),N(e.getItems4GenePanel(j,(0,se.filter)(u,function(G){return!G.checked})))}).catch(function(j){console.log("getGeneInfo Error: ",j),i(void 0)})}},[n,u]);var g=function(){var j=function(C){var O=C.target,J=O.checked,D=O.value;Z(J?(0,se.map)(u,function(P){return P.key===D&&(P.checked=!0),P}):(0,se.map)(u,function(P){return P.key===D&&(P.checked=!1),P}))};return(0,t.jsx)("div",{children:h.map(function(G){return(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:G.checked,value:G.key,onChange:j}),"\xA0",(0,t.jsx)("span",{children:G.label})]},G.key)})})},S=(0,t.jsx)(yn.Z,{content:g(),children:(0,t.jsx)(W.Z,{shape:"circle",className:"tabs-extra-button",icon:(0,t.jsx)(Lt.Z,{})})});return(0,t.jsx)(ve.Z,{className:"gene-info-panel tabs-nav-right",tabBarExtraContent:{left:S,right:null},items:h})},Go=Do,Mo=function(e){var n=e.node,a=function(o){if(o){var i=o.nlabel.toLocaleLowerCase();if(["gene","protein"].includes(i))return(0,t.jsx)(Go,{node:o,getGeneInfo:e.getGeneInfo,getItems4GenePanel:e.getItems4GenePanel});if(["drug","chemical","compound"].includes(i))return(0,t.jsx)(Io,{node:o});if(["disease"].includes(i))return(0,t.jsx)(ko,{node:o})}return(0,t.jsx)(ke.Z,{})};return(0,t.jsx)(X.Z,{className:"node-info-panel",children:a(n)})},Lo=Mo,Oo=function(e){var n=e.edgeInfo||{edge:void 0,startNode:void 0,endNode:void 0},a=n.edge,r=n.startNode,o=n.endNode;return(0,l.useEffect)(function(){},[a,r,o]),(0,t.jsxs)(ve.Z,{className:"drug-gene-info-panel",children:[(0,t.jsx)(ve.Z.TabPane,{tab:"DrugGene Info",children:"We can show the drug-gene association information here. Maybe it's summarized information from publications."},"drug-gene-info"),(0,t.jsx)(ve.Z.TabPane,{tab:"Drug Targets",children:"Comming soon..."},"clinical-trails")]})},Ro=Oo,Ao=function(e){var n=e.edgeInfo||{edge:void 0,startNode:void 0,endNode:void 0},a=n.edge,r=n.startNode,o=n.endNode;return(0,l.useEffect)(function(){},[a,r,o]),(0,t.jsxs)(ve.Z,{className:"drug-disease-info-panel tabs-nav-right",children:[(0,t.jsx)(ve.Z.TabPane,{tab:"DrugDisease Info",children:"We can show the drug-disease association information here. Maybe it's summarized information from clinical trials, or publications."},"drug-disease-info"),(0,t.jsx)(ve.Z.TabPane,{tab:"Patents",children:"We can show the patents information here. Maybe it's summarized information from patents database."},"drug-patent-info"),(0,t.jsx)(ve.Z.TabPane,{tab:"Products",children:"We can show the production information here. Maybe it's summarized information from drug production database."},"drug-product-info")]})},Fo=Ao,zo=function(e){var n=e.edgeInfo||{edge:void 0,startNode:void 0,endNode:void 0},a=n.edge,r=n.startNode,o=n.endNode;return(0,l.useEffect)(function(){console.log("GeneDiseasePanel: ",a,r,o)},[a,r,o]),(0,t.jsxs)(ve.Z,{className:"gene-disease-info-panel tabs-nav-right",children:[(0,t.jsx)(ve.Z.TabPane,{tab:"GeneDiease Info",children:"We can show the gene-disease association information here. Maybe it's summarized information from publications."},"gene-disease-info"),(0,t.jsx)(ve.Z.TabPane,{tab:"Diff Expression",children:"we can show the diff expression here. It can tell us whether the gene is up-regulated or down-regulated in the disease."},"diff-expr"),(0,t.jsx)(ve.Z.TabPane,{tab:"Biomarkers",children:"we can show the related biomarkers. It can tell us which genes are the biomarkers of the disease."},"biomarker")]})},Vo=zo,Bo=function(e){var n=e.edgeInfo||{edge:void 0,startNode:void 0,endNode:void 0},a=n.edge,r=n.startNode,o=n.endNode,i=(0,l.useState)("Unknown"),s=(0,y.Z)(i,2),d=s[0],u=s[1],Z=function(x){switch(console.log("whichPanel: ",x),x){case"DrugDisease":return(0,t.jsx)(Fo,{edgeInfo:e.edgeInfo});case"DrugGene":return(0,t.jsx)(Ro,{edgeInfo:e.edgeInfo});case"GeneDisease":return(0,t.jsx)(Vo,{edgeInfo:e.edgeInfo});default:return(0,t.jsx)(ke.Z,{})}};return(0,l.useEffect)(function(){if(console.log("EdgeInfoPanel: ",a,r,o),a&&r&&o){var b=r.nlabel,x=o.nlabel,h=[b,x].sort().join("");console.log("relationTypes: ",h,d),u(""),["CompoundDisease","ChemicalDisease","DiseaseDrug"].indexOf(h)>=0&&u("DrugDisease"),["DiseaseGene","GeneDisease"].indexOf(h)>=0&&u("GeneDisease"),["CompoundGene","ChemicalGene","DrugGene"].indexOf(h)>=0&&u("DrugGene")}},[a,r,o]),(0,t.jsx)(X.Z,{className:"edge-info-panel",children:Z(d)})},Uo=Bo,Gl=c(32157),Wo=c(82363),Ko=function(e){var n={name:"file",action:"/api/upload",showUploadList:!1,beforeUpload:function(r){var o=new FileReader;return o.readAsText(r),o.onload=function(){try{var i=JSON.parse(o.result);e.onUpload&&e.onUpload(i)}catch(s){qt.Z.error({message:"Failed to parse file",description:"Please make sure the file is a valid JSON file"})}},o.onerror=function(i){Q.ZP.error("Failed to read file")},!1}};return(0,t.jsx)(Kn.Z,(0,m.Z)((0,m.Z)({},n),{},{children:(0,t.jsx)(W.Z,{icon:(0,t.jsx)(Hn.Z,{}),children:"Upload"})}))},Ho=Ko,$o=Wo.Z.DirectoryTree,_o=function(e){var n={};e.forEach(function(i){n[i.id]=i});var a=[];e.forEach(function(i){if(console.log("parent: ",i.parent,"id: ",i.id),i.parent===i.id){var s=(0,m.Z)((0,m.Z)({},i),{},{title:i.name,key:i.id});a.push(s)}else{var d=n[i.parent];d&&(d.children=d.children||[],d.children.push((0,m.Z)((0,m.Z)({},i),{},{title:i.name+"-"+i.id.slice(0,8),key:i.id,isLeaf:!0})))}});var r=function i(s){var d=[];return s.forEach(function(u){u.children?d=d.concat(i(u.children).concat([(0,m.Z)((0,m.Z)({},u),{},{children:void 0})])):d.push(u)}),d},o=[];return a.forEach(function(i){i.children?i.children=r(i.children).concat((0,m.Z)((0,m.Z)({},i),{},{children:void 0})):i.children=[(0,m.Z)((0,m.Z)({},i),{},{children:void 0})],o.push(i)}),console.log("makeTree",e,n,a,o),o},Qo=function(e){var n=6,a=l.useState([]),r=(0,y.Z)(a,2),o=r[0],i=r[1],s=l.useState([]),d=(0,y.Z)(s,2),u=d[0],Z=d[1],b=l.useState([]),x=(0,y.Z)(b,2),h=x[0],N=x[1],g=l.useState(n),S=(0,y.Z)(g,2),I=S[0],j=S[1],G=[{title:"Name",dataIndex:"name",key:"name",align:"center",width:150,fixed:"left"},{title:"Created At",dataIndex:"created_time",key:"created_time",align:"center",render:function(D){return new Date(D).toLocaleString()},width:200},{title:"Version",key:"version",align:"center",dataIndex:"version",width:100},{title:"UUID",key:"id",align:"center",dataIndex:"id",width:200},{title:"DB Version",key:"db_version",align:"center",dataIndex:"db_version",width:150},{title:"Action",key:"action",align:"center",fixed:"right",width:240,render:function(D,P,L){return(0,t.jsxs)(en.Z,{size:"small",children:[(0,t.jsxs)(W.Z,{size:"small",type:"link",disabled:e.selectedGraphId===P.id,onClick:function(H){if(h){var $=h[L];$&&e.onLoad(P,$)}else console.log("GraphTable load: something wrong.",h,L,P),e.onLoad(P,P)},children:["Load",e.selectedGraphId===P.id?"ed":""]}),(0,t.jsx)(W.Z,{size:"small",type:"link",onClick:function(H){var $=JSON.stringify(P),ce=new Blob([$],{type:"application/json"}),Ze=URL.createObjectURL(ce),pe=document.createElement("a");pe.href=Ze,pe.download=P.name+".json",document.body.appendChild(pe),pe.click(),document.body.removeChild(pe)},children:"Download"}),(0,t.jsx)(W.Z,{size:"small",type:"link",danger:!0,onClick:function(H){return e.onDelete(P)},children:"Delete"})]})}}],C=function(D,P){if(console.log("Trigger Select",D,P),P.selectedNodes[0]&&P.selectedNodes[0].children){var L=P.selectedNodes[0];N(L.children),Z(D)}else Z([]),N([])},O=function(D,P){console.log("Trigger Expand",D,P)};return(0,l.useEffect)(function(){if(e.treeFormat){var J=_o(e.graphs);i(J);var D=J[0]?J[0].children:[];N(D),j(n),Z(J[0]?[J[0].key]:[])}else N(e.graphs),j(0)},[e.graphs]),(0,t.jsx)(tt.Z,{className:"graph-table",title:"Graph Table",open:e.visible,width:1e3,closable:!0,onCancel:e.onClose,getContainer:e.parent?e.parent:document.body,footer:e.onUpload?[(0,t.jsx)(Ho,{onUpload:function(D){if(e.onUpload){var P=D;delete P.parent,delete P.created_time,e.onUpload(P)}}},"upload-graph")]:null,children:(0,t.jsxs)(X.Z,{gutter:16,children:[(0,t.jsx)(we.Z,{span:I,children:e.treeFormat?(0,t.jsx)($o,{defaultExpandAll:!0,selectedKeys:u,onSelect:C,onExpand:O,treeData:o,fieldNames:{title:"title",key:"key",children:"notShown"}}):null}),(0,t.jsx)(we.Z,{span:24-I,children:(0,t.jsx)(Ye.Z,{rowKey:"id",columns:G,dataSource:h,pagination:!1,scroll:{y:500,x:800},size:"small",expandable:{expandedRowRender:function(D){return(0,t.jsx)("p",{style:{margin:0},children:D.description||"No description"})},rowExpandable:function(D){return D.name!=="Not Expandable"}}})})]})})},Yo=Qo,Jo=c(17566),Xo=function(e){var n=(0,l.useContext)(Pe.Z),a=n.graph,r=function(s){if(e.payload)if(a){console.log("Save graph data which are from graphin.");var d=An(a);e.onSubmit((0,m.Z)({payload:d},s))}else console.log("Save graph data which are from server."),e.onSubmit((0,m.Z)({payload:e.payload},s))},o=function(s){console.log("Failed:",s),Q.ZP.error("Failed to submit graph")};return(0,t.jsx)(tt.Z,{className:"graph-form",title:"Save the current graph",open:e.visible,footer:null,width:500,closable:!0,onCancel:e.onClose,destroyOnClose:!0,getContainer:e.parent?e.parent:document.body,children:(0,t.jsxs)(fe.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{remember:!0},onFinish:r,onFinishFailed:o,autoComplete:"off",children:[(0,t.jsx)(fe.Z.Item,{label:"name",name:"name",rules:[{required:!0,message:"Please input a graph name!"}],children:(0,t.jsx)(Bt.Z,{placeholder:"Please input a graph name"})}),(0,t.jsx)(fe.Z.Item,{label:"description",name:"description",rules:[{required:!1,message:"Please input description!"}],children:(0,t.jsx)(Jo.Z,{rows:5,placeholder:"Please input description!"})}),(0,t.jsx)(fe.Z.Item,{wrapperCol:{offset:20,span:4},children:(0,t.jsx)(W.Z,{type:"primary",htmlType:"submit",children:"Submit"})})]})})},qo=Xo,ei=function(e){for(var n="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=a.length,o=0;o<e;)n+=a.charAt(Math.floor(Math.random()*r)),o+=1;return n},ti=function(e){var n=(0,l.useContext)(mn),a=e.data,r=(0,l.useState)([]),o=(0,y.Z)(r,2),i=o[0],s=o[1],d=(0,l.useState)(ei(5)),u=(0,y.Z)(d,2),Z=u[0],b=u[1];(0,l.useEffect)(function(){var h=[];if(n.selectedNodes){var N;console.log("graphinContext.selectedNodes: ",n.selectedNodes),h=(N=n.selectedNodes)===null||N===void 0?void 0:N.map(function(j){return j.data.id})}if(a.length!==0){var g=[],S=[],I={};a.forEach(function(j){I[j.nlabel]?I[j.nlabel].push(j):I[j.nlabel]=[j]}),Object.keys(I).forEach(function(j){var G=I[j],C=G.map(function(L){return L.x}),O=G.map(function(L){return L.y}),J=G.map(function(L){return L.nlabel}),D=[];h?D=G.map(function(L){return console.log("item.data.id: ",L.data.id,h),h.includes(L.data.id)?L.data.name:""}):D=G.map(function(L){return L.data.name});var P=G.map(function(L){return L.data.id});S.push({x:C,y:O,type:"scatter",mode:"markers+text",textposition:"bottom center",text:D,customdata:G,name:J[0],extra:P,marker:{color:G[0].style.keyshape.fill,size:10},hovertemplate:"<b>%{customdata.data.name}</b><br>%{customdata.data.id}<br>%{yaxis.title.text}: %{y}<br>%{xaxis.title.text}: %{x}<br><extra></extra>",texttemplate:"%{text}"})}),g.push({data:S,layout:_e("","X","Y",!1)}),console.log("localCharts: ",g),s(g)}},[a,n.selectedNodes]);var x=function(N){if(N.points.length===1){var g=N.points[0];g.customdata&&e.onClick&&e.onClick(g.customdata)}else console.log("onPlotlyClick: ",N),Q.ZP.info("Please click one node to focus.")};return(0,t.jsxs)(X.Z,{className:"complex-chart",children:[e.description?(0,t.jsx)("span",{className:"notice",children:e.description}):null,i.length===0?(0,t.jsx)(we.Z,{span:24,children:(0,t.jsx)(ke.Z,{})}):i.map(function(h,N){return(0,t.jsx)(we.Z,{span:24,style:{height:"400px"},children:(0,t.jsx)(Ht,{mode:"Plotly",plotlyData:h,divId:"".concat(Z),onClick:x,forceResize:!0})},N)})]})},ni=ti,ai={backgroundImage:"url(".concat(window.publicPath+"graph-background.png",")")},ri=function(e){var n=e.apis,a=(0,se.partial)(or,n),r=(0,se.partial)(rr,n),o=(0,se.partial)(tr,n),i=tt.Z.useModal(),s=(0,y.Z)(i,2),d=s[0],u=s[1],Z=(0,l.useState)({nodes:[],edges:[]}),b=(0,y.Z)(Z,2),x=b[0],h=b[1],N=(0,l.useState)([]),g=(0,y.Z)(N,2),S=g[0],I=g[1],j=(0,l.useState)([]),G=(0,y.Z)(j,2),C=G[0],O=G[1],J=(0,l.useState)([]),D=(0,y.Z)(J,2),P=D[0],L=D[1],K=(0,l.useState)([]),H=(0,y.Z)(K,2),$=H[0],ce=H[1],Ze=(0,l.useState)([]),pe=(0,y.Z)(Ze,2),V=pe[0],_=pe[1],xe=(0,l.useState)(!1),ye=(0,y.Z)(xe,2),be=ye[0],De=ye[1],le=(0,l.useState)(!1),Te=(0,y.Z)(le,2),Ge=Te[0],Ce=Te[1],Ve=(0,l.useState)([]),A=(0,y.Z)(Ve,2),q=A[0],Y=A[1],ee=(0,l.useState)([]),T=(0,y.Z)(ee,2),p=T[0],f=T[1],k=(0,l.useState)(!1),B=(0,y.Z)(k,2),U=B[0],ae=B[1],ie=(0,l.useState)(void 0),he=(0,y.Z)(ie,2),Le=he[0],Qe=he[1],Oe=(0,l.useState)(!1),qe=(0,y.Z)(Oe,2),Be=qe[0],Re=qe[1],nn=(0,l.useState)(void 0),xt=(0,y.Z)(nn,2),ea=xt[0],ta=xt[1],Ti=(0,l.useState)(!1),na=(0,y.Z)(Ti,2),Di=na[0],an=na[1],Gi=(0,l.useState)([]),aa=(0,y.Z)(Gi,2),Mi=aa[0],ra=aa[1],Li=(0,l.useState)("activate"),oa=(0,y.Z)(Li,2),Oi=oa[0],ia=oa[1],Ri=(0,l.useState)(""),la=(0,y.Z)(Ri,2),Ai=la[0],rn=la[1],Fi=(0,l.useState)([]),sa=(0,y.Z)(Fi,2),zi=sa[0],Vi=sa[1],Bi=(0,l.useState)(!1),da=(0,y.Z)(Bi,2),on=da[0],ca=da[1],Ui=(0,l.useState)({node_type:"",node_id:"",nsteps:1,merge_mode:"replace",enable_prediction:!1,limit:50}),ua=(0,y.Z)(Ui,2),Ae=ua[0],St=ua[1],Wi=l.useState(ir),fa=(0,y.Z)(Wi,2),ha=fa[0],va=fa[1],Ki=(0,l.useState)("New Graph"),pa=(0,y.Z)(Ki,2),ln=pa[0],ga=pa[1],Hi=(0,l.useState)("New Graph"),ma=(0,y.Z)(Hi,2),sn=ma[0],ya=ma[1],$i=(0,l.useState)(!1),xa=(0,y.Z)($i,2),Sa=xa[0],dn=xa[1],_i=(0,l.useState)([]),Za=(0,y.Z)(_i,2),Qi=Za[0],Yi=Za[1],Ji=(0,l.useState)(!1),ba=(0,y.Z)(Ji,2),Xi=ba[0],cn=ba[1],qi=(0,l.useState)(!1),Ca=(0,y.Z)(qi,2),el=Ca[0],un=Ca[1],tl=(0,l.useState)({}),ja=(0,y.Z)(tl,2),nl=ja[0],al=ja[1],et=function(E){var R=new Set(E.nodes.map(function(re){return re.id})),ne=E.edges.filter(function(re){return!R.has(re.source)||!R.has(re.target)}),ue=E.edges.filter(function(re){return R.has(re.source)&&R.has(re.target)});dn(!0),h({nodes:E.nodes,edges:er(ue,{})})},rl=function(){h({nodes:[],edges:[]}),ga(""),ya("")},ol=function(E,R){return(0,t.jsxs)("span",{children:[E?(0,t.jsx)(Fe.Z,{color:"#f50",children:"dirty"}):(0,t.jsx)(Fe.Z,{color:"#87d068",children:"cleaned"}),"\xA0",R]})};(0,l.useEffect)(function(){var z=wn(x.nodes);L(z);var E=Nn(z,["comboId","style","data"]);O(E);var R=wn(x.edges);_(R);var ne=Nn(R,[]);ce(ne),console.log("Node & Edge Columns: ",E,ne),I([[(0,t.jsxs)("span",{children:["Nodes ",(0,t.jsx)(Fe.Z,{color:"#2db7f5",children:"Canvas"})]}),x.nodes.length],[(0,t.jsxs)("span",{children:["Edges ",(0,t.jsx)(Fe.Z,{color:"#2db7f5",children:"Canvas"})]}),x.edges.length],[(0,t.jsxs)("span",{children:["Nodes ",(0,t.jsx)(Fe.Z,{color:"#108ee9",children:"KGraph"})]}),q.reduce(function(ue,re){return ue+re.node_count},0).toLocaleString()],[(0,t.jsxs)("span",{children:["Edges ",(0,t.jsx)(Fe.Z,{color:"#108ee9",children:"KGraph"})]}),p.reduce(function(ue,re){return ue+re.relation_count},0).toLocaleString()],[(0,t.jsxs)("span",{children:["Status ",(0,t.jsx)(Fe.Z,{color:"#2db7f5",children:"Canvas"})]}),ol(Sa,sn)]])},[x,p,q,sn]);var fn=function(){n.getGraphHistory({page:1,page_size:100}).then(function(E){Yi(E.data)}).catch(function(E){console.log(E),Q.ZP.error("Failed to get graph histories, please check the network connection.")})},il=function(E,R,ne,ue){return new Promise(function(re,We){n.postDimensionReduction({source_id:E,source_type:R,target_ids:ne,target_types:ue}).then(function(je){console.log("Get dimensions: ",je),re(je.data)}).catch(function(je){console.log("Error when getting dimensions: ",je),We([])})})},Na=function(E,R){var ne=E.payload;ne&&(dn(!1),ga(R.id),ya(E.id),et(ne.data),va(ne.layout),De(ne.toolbarVisible),cn(!1))},ll=function(E,R){console.log("Load graph: ",E,R),Sa?d.confirm({title:"You have unsaved changes",icon:(0,t.jsx)(ht.Z,{}),content:"Are you sure to load another graph?",okText:"Load",cancelText:"Cancel",onOk:function(){dn(!1),Na(E,R)},onCancel:function(){}}):Na(E,R)},sl=function(E){n.deleteGraphHistory({id:E.id}).then(function(R){Q.ZP.success("Graph deleted successfully."),fn()}).catch(function(R){console.log(R),Q.ZP.error("Failed to delete graph, please check the network connection.")})};(0,l.useEffect)(function(){n.getStatistics().then(function(z){Y(z.node_stat),f(z.relationship_stat)}).catch(function(z){console.log(z),Q.ZP.error("Failed to get statistics, please check the network connection.")}),fn()},[]),(0,l.useEffect)(function(){on===!1&&ar(Ae)?(Ce(!0),Q.ZP.info("Loading data, please wait..."),r(Ae).then(function(z){if(console.log("Query Graph Response: ",z),Ae.merge_mode=="replace")et(z);else if(Ae.merge_mode=="append")et({nodes:(0,se.uniqBy)([].concat((0,me.Z)(x.nodes),(0,me.Z)(z.nodes)),"id"),edges:(0,se.uniqBy)([].concat((0,me.Z)(x.edges),(0,me.Z)(z.edges)),"relid")});else if(Ae.merge_mode=="subtract"){var E=z.nodes,R=z.edges,ne=E.map(function(je){return je.id});ne=ne.filter(function(je){var Zt=function(ct,Ct,jt){return(ct.target==Ct||ct.source==Ct)&&jt.indexOf(ct.reltype)>-1},dt=Ae.relation_types||R.map(function(Ke){return Ke.reltype}),bt=x.edges.filter(function(Ke){return Zt(Ke,je,dt)});return console.log("Found: ",bt,je,dt),bt.length<2});var ue=x.nodes.filter(function(je){return!ne.includes(je.id)}),re=x.edges.filter(function(je){return!ne.includes(je.source)&&!ne.includes(je.target)}),We={nodes:ue,edges:re};console.log("New Data: ",We,x,z,ne),et(We)}else Q.ZP.warn("Unknown merge mode, please retry later.");Q.ZP.success("Find ".concat(z.nodes.length," entities and ").concat(z.edges.length," relationships.")),Ce(!1)}).catch(function(z){console.log("getNodes Error: ",z),Q.ZP.warn("Unknown errors or Cannot find any entities & relationships."),Ce(!1)})):console.log("Advanced Search Panel is active or search object is invalid: ",on,Ae)},[Ae]);var hn=function(){ca(!0)},wa=function(){ca(!1)},dl=function(E){console.log("Search Object: ",E),wa(),St(E)},cl=function(E,R){St({mode:"node",node_type:E,node_id:R,merge_mode:"replace",nsteps:1,limit:50,enable_prediction:!1})},ul=function(E,R,ne){if(E.key=="auto-connect"){Q.ZP.info("Auto connecting nodes, please wait..."),Ce(!0);var ue=R.getNodes().map(function(re){return re.getModel()});o(ue).then(function(re){console.log("Auto Connect Response: ",re),et({nodes:(0,se.uniqBy)([].concat((0,me.Z)(x.nodes),(0,me.Z)(re.nodes)),"id"),edges:(0,se.uniqBy)([].concat((0,me.Z)(x.edges),(0,me.Z)(re.edges)),"relid")}),re.nodes.length==0&&re.edges.length==0?Q.ZP.warn("No more relationships can be found."):Q.ZP.success("Find ".concat(re.nodes.length," entities and ").concat(re.edges.length," relationships."))}).catch(function(re){console.log("Auto Connect Error: ",re),Q.ZP.warn("Something went wrong, please try again later.")}).finally(function(){Ce(!1)})}},fl=function(E,R,ne,ue,re,We){E.key=="what-is-the-relationship"?e.postMessage&&e.postMessage("what is the relationship between ".concat(R.data.name," and ").concat(ne.data.name,"?")):E.key=="show-edge-details"&&(Re(!0),ta({startNode:R,endNode:ne,edge:ue}))},hl=function(E,R,ne,ue){if(console.log("onNodeMenuClick [".concat(E.key,"]: "),E,R),E.key=="delete-nodes"){var re=Vt(ne),We=(0,me.Z)(re.map(function(de){return de.id}));if(re.length==0){Q.ZP.info("Please select one or more nodes to delete.");return}else Q.ZP.info("Deleting ".concat(re.length," nodes, please wait...")),re.forEach(function(de){ne.removeItem(de.id)}),et({nodes:x.nodes.filter(function(de){return!We.includes(de.id)}),edges:x.edges.filter(function(de){return!We.includes(de.source)&&!We.includes(de.target)})})}else if(E.key=="expand-one-level")hn(),St({node_type:R.nlabel,node_id:R.data.id,merge_mode:"append"});else if(["expand-all-paths-1","expand-all-paths-2","expand-all-paths-3"].includes(E.key)){console.log("Expand All Paths: ",E.key);var je=Vt(ne);if(je.length==0){Q.ZP.info("Please select one or more nodes to expand.");return}else St({nodes:je,merge_mode:"append",mode:"path",nsteps:parseInt(E.key.split("-").pop()||"1"),limit:50})}else if(E.key=="expand-selected-nodes"){var Zt=Vt(ne);Zt.length==0&&R&&Zt.push(R),hn(),St({nodes:Zt,merge_mode:"append",mode:"batchNodes",node_id:"",node_type:""})}else if(E.key=="what-is-the-node")e.postMessage&&e.postMessage("what is the ".concat(R.data.name,"?"));else if(E.key=="predict-relationships"){var dt="".concat(R.nlabel,"::").concat(R.data.id),bt=Vt(ne),Ke=bt.map(function(de){return"".concat(de.nlabel,"::").concat(de.data.id)});Ke=Ke.filter(function(de){return de!=dt}),console.log("Predict Relationships: ",E,dt,Ke,bt),a(dt,Ke).then(function(de){console.log("Predict Relationships Response: ",de),de.nodes.length==0&&de.edges.length==0?Q.ZP.warn("No more relationships can be found."):et({nodes:(0,se.uniqBy)([].concat((0,me.Z)(x.nodes),(0,me.Z)(de.nodes)),"id"),edges:(0,se.uniqBy)([].concat((0,me.Z)(x.edges),(0,me.Z)(de.edges)),"relid")})}).catch(function(de){console.log("Predict Relationships Error: ",de),Q.ZP.warn("Something went wrong, please try again later.")})}else if(E.key=="visulize-similarities"){var ct=dr(ne),Ct=R.nlabel,jt=R.data.id,Ia=ct.filter(function(de){return de.data.id!=jt}),Pa=Ia.map(function(de){return de.nlabel}),Ta=Ia.map(function(de){return de.data.id});Ce(!0),il(jt,Ct,Ta,Pa).then(function(de){console.log("Get Dimensions Response: ",de,Ta,Pa,jt,Ct);var Sl=de.map(function(ut){var Da=ct.filter(function(Ga){return Ga.data.id==ut.node_id&&Ga.nlabel==ut.node_type});return Da.length>0?(0,m.Z)((0,m.Z)({},Da[0]),{},{x:ut.x,y:ut.y}):{}}).filter(function(ut){return Object.keys(ut).length>0});ra(Sl),an(!0),Ce(!1)}).catch(function(de){console.log("Get Dimensions Error: ",de),ra([]),an(!1),Q.ZP.error("Failed to get similarities, please check the network connection."),Ce(!1)}).finally(function(){Ce(!1)})}else E.key=="show-node-details"&&(ae(!0),Qe(R))},vl={selectedRowKeys:zi},pl=function(E){var R=l.Children.count(E.children),ne=l.Children.toArray(E.children),ue=[{label:"Nodes",key:"nodes",children:R>=2?ne[0]:"No Content"},{label:"Edges",key:"edges",children:R>=2?ne[1]:"No Content"}];return(0,t.jsx)(ve.Z,{className:"tabs-nav-center",children:ue.map(function(re){return(0,t.jsx)(ve.Z.TabPane,{tab:re.label,children:re.children},re.key)})})},gl=function(){un(!0),al({data:x,layout:ha,toolbarVisible:be})},ml=function(){De(!be)},yl=function(E,R){console.log("Node Clicked: ",E,x,R),R&&(ae(!0),Qe(R))},xl=function(E,R,ne,ue){console.log("Edge Clicked: ",E),E&&(Re(!0),ta({edge:ue,startNode:R,endNode:ne}))},ka=function(){Re(!1),ae(!1)},st=(0,Mt.r)(),Ea=function(E){return new Promise(function(R,ne){ln&&sr(ln)&&(E=(0,m.Z)((0,m.Z)({},E),{},{parent:ln})),delete E.id,n.postGraphHistory(E).then(function(ue){return Q.ZP.success("Graph data saved."),fn(),R(ue)}).catch(function(ue){return console.log("Post Graphs Error: ",ue),Q.ZP.error("Graph save failed."),ne(ue)})})};return(0,t.jsx)(Mt.I,{handle:st,children:(0,t.jsx)(X.Z,{className:"knowledge-graph-container",id:"knowledge-graph-container",children:(0,t.jsxs)(Qt.Z,{spinning:Ge,children:[(0,t.jsxs)(X.Z,{className:"left-toolbar",children:[(0,t.jsx)(ft.Z,{title:st.active?"Exit Full Screen":"Enter Full Screen",placement:"right",children:(0,t.jsx)(W.Z,{className:"full-screen-button",onClick:st.active?st.exit:st.enter,shape:"circle",icon:st.active?(0,t.jsx)(pn.Z,{}):(0,t.jsx)(nt.Z,{})})}),(0,t.jsx)(ft.Z,{title:be?"Hide Toolbar":"Show Toolbar",placement:"right",children:(0,t.jsx)(W.Z,{className:"toolbar-button",onClick:ml,shape:"circle",icon:be?(0,t.jsx)(Lt.Z,{}):(0,t.jsx)(vt.Z,{})})}),(0,t.jsx)(ft.Z,{title:"Save Graph Data",placement:"right",children:(0,t.jsx)(W.Z,{className:"save-button",onClick:gl,shape:"circle",icon:(0,t.jsx)(Yt.Z,{})})}),(0,t.jsx)(ft.Z,{title:"Load Graph Data",placement:"right",children:(0,t.jsx)(W.Z,{className:"clear-button",onClick:function(){cn(!0)},shape:"circle",icon:(0,t.jsx)(at.Z,{})})})]}),(0,t.jsxs)(X.Z,{className:"top-toolbar",children:[(0,t.jsx)(Wr,{onChange:cl,onAdvancedSearch:hn,getLabels:n.getLabels,getNodeTypes:n.getNodeTypes}),(0,t.jsx)(vo,{onOk:dl,visible:on,onCancel:wa,searchObject:Ae,edgeStat:p,parent:document.getElementById("knowledge-graph-container"),apis:n},Ae.node_id)]}),(0,t.jsxs)(we.Z,{className:"graphin",style:{width:"100%",height:"100%",position:"relative"},children:[(0,t.jsx)(Je,{position:"top",width:"300px",height:"100%",closable:!0,title:"Statistics",children:(0,t.jsx)(No,{nodeStat:q,edgeStat:p})}),(0,t.jsx)(Je,{position:"left",width:"60%",title:"Charts",closable:!0,children:(0,t.jsx)(bo,{data:x})}),(0,t.jsx)(Je,{position:"right",width:"80%",closable:!1,maskVisible:!0,visible:U,onClose:ka,children:Le&&e.getGeneInfo&&e.getItems4GenePanel?(0,t.jsx)(Lo,{node:Le,getGeneInfo:e.getGeneInfo,getItems4GenePanel:e.getItems4GenePanel}):(0,t.jsx)(ke.Z,{description:"No node selected"})}),(0,t.jsx)(Je,{position:"right",width:"80%",closable:!1,maskVisible:!0,visible:Be,onClose:ka,children:ea?(0,t.jsx)(Uo,{edgeInfo:ea}):(0,t.jsx)(ke.Z,{description:"No edge selected"})}),(0,t.jsx)(Je,{position:"bottom",width:"300px",height:"300px",onClick:function(){rn("")},children:(0,t.jsxs)(pl,{children:[C.length>0?(0,t.jsx)(Ye.Z,{size:"small",scroll:{y:200},rowKey:"identity",dataSource:P,columns:C,pagination:!1,onRow:function(E,R){return{onClick:function(ue){console.log("Click the node item: ",ue,E),rn(E.identity),Vi([E.identity])}}},rowSelection:(0,m.Z)({type:"radio"},vl)}):null,C.length>0?(0,t.jsx)(Ye.Z,{size:"small",scroll:{y:200},rowKey:"id",dataSource:V,columns:$,pagination:!1}):null]})}),(0,t.jsxs)(Br,{selectedNode:Ai,highlightMode:Oi,data:x,layout:ha,style:ai,queriedId:Ae.node_id,statistics:S,toolbarVisible:be,onClearGraph:rl,onEdgeMenuClick:fl,chatbotVisible:!!e.postMessage,onClickNode:yl,onClickEdge:xl,onCanvasMenuClick:ul,changeLayout:function(E){va(E)},onNodeMenuClick:hl,children:[Di?(0,t.jsx)(Rt,{onClose:function(){an(!1),ia("activate")},width:"600px",title:"Node Similarity [t-SNE]",children:(0,t.jsx)(ni,{data:Mi,description:'If you expect to highlight nodes on the chart, you need to enable the "Focus" and "Select" mode.',onClick:function(E){rn(E.id),ia("focus")}})}):null,(0,t.jsx)(Yo,{visible:Xi,graphs:Qi,onLoad:ll,onDelete:sl,treeFormat:!0,parent:document.getElementById("knowledge-graph-container"),onClose:function(){cn(!1)},onUpload:function(E){Ea(E)},selectedGraphId:sn}),(0,t.jsx)(qo,{visible:el,payload:nl,parent:document.getElementById("knowledge-graph-container"),onClose:function(){un(!1)},onSubmit:function(E){Ea(E).finally(function(){un(!1)})}})]}),u]})]})})})},oi=ri,ii=c(75491),li=c(41935),ze=c(67569),si=c(95093),di=function(){var v=(0,Ut.Z)((0,$e.Z)().mark(function e(n){var a,r,o;return(0,$e.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,si.Z.get("https://mygene.info/v3/gene/".concat(n));case 2:return a=s.sent,r=a.data,o={_id:r._id,_version:r._version,entrezgene:r.entrezgene,hgnc:r.HGNC,name:r.name,symbol:r.symbol,taxid:r.taxid,type_of_gene:r.type_of_gene,summary:r.summary,ensembl:{gene:r.ensembl.gene,transcript:r.ensembl.transcript,protein:r.ensembl.protein,translation:r.ensembl.translation},genomic_pos:{chr:r.genomic_pos.chr,start:r.genomic_pos.start,end:r.genomic_pos.end,strand:r.genomic_pos.strand}},s.abrupt("return",o);case 6:case"end":return s.stop()}},e)}));return function(n){return v.apply(this,arguments)}}(),ci=function(e){var n=(0,l.useState)(""),a=(0,y.Z)(n,2),r=a[0],o=a[1],i=(0,l.useState)(""),s=(0,y.Z)(i,2),d=s[0],u=s[1];return(0,l.useEffect)(function(){e.geneSymbol&&u("https://omics-data.3steps.cn/fetch/expression_atlas?geneSymbol=".concat(e.geneSymbol,"&taxId=").concat(e.taxId||9606))},[e.geneSymbol]),(0,l.useEffect)(function(){e.rootId?o(e.rootId):o("expression_atlas")},[]),(0,t.jsx)("iframe",{id:r,title:"Expression Atlas",src:d,style:{width:"100%",height:"100%",border:"none",minHeight:"1000px"}})},ui=ci,fi=function(e){var n=(0,l.useState)(""),a=(0,y.Z)(n,2),r=a[0],o=a[1],i=(0,l.useState)(""),s=(0,y.Z)(i,2),d=s[0],u=s[1],Z="";return(0,l.useEffect)(function(){e.geneSymbol&&u("https://omics-data.3steps.cn/fetch/gene_cards?geneSymbol=".concat(e.geneSymbol,"&taxId=").concat(e.taxId||9606))},[e.geneSymbol]),(0,l.useEffect)(function(){e.rootId?o(e.rootId):o("gene-info")},[]),(0,t.jsx)("div",{className:"gtex-viewer",children:(0,t.jsxs)("div",{className:"summary",children:[(0,t.jsx)("h3",{className:"summary-title",children:"Summary [Summarized by AI]"}),(0,t.jsx)("p",{className:"summary-content",children:Z})]})})},hi=fi,lt=c(88902),vi="Overall, this table provides insights into the tissue-specific expression pattern of the SLC6A4 gene in human tissues, as well as the specific transcript variants that are expressed in each tissue. The median expression levels suggest that SLC6A4 is highly expressed in some tissues, such as small intestine, lung, and EBV-transformed lymphocytes, but not expressed or expressed at very low levels in other tissues, such as heart, liver, and skeletal muscle. The information in this table can be used to gain a better understanding of the role of SLC6A4 in different tissues and may be useful in designing future studies investigating the gene's function in health and disease.",pi=function(e){var n=(0,l.useState)(""),a=(0,y.Z)(n,2),r=a[0],o=a[1],i=(0,l.useState)(e.officialGeneSymbol=="ENSG00000108576"?vi:"It's working hard to generate summary for you by AI, please wait... (For the reason of the limitation of the computing resources, you may need to wait for a long time, please be patient or try again later)"),s=(0,y.Z)(i,2),d=s[0],u=s[1];return(0,l.useEffect)(function(){e.rootId?o(e.rootId):o("gtex-viewer")},[]),(0,t.jsxs)("div",{className:"gtex-viewer",children:[(0,t.jsxs)("div",{className:"summary",children:[(0,t.jsx)("h3",{className:"summary-title",children:"Summary [Summarized by AI]"}),(0,t.jsx)("p",{className:"summary-content",children:d})]}),e.type=="transcript"?(0,t.jsxs)("div",{className:"transcript-figures",children:[(0,t.jsx)(lt.E7,{rootId:r+"-isoform-transposed",type:"isoformTransposed",title:e.title||"Isoform Transposed",geneId:e.officialGeneSymbol}),(0,t.jsx)(lt.E7,{rootId:r+"-exon",title:e.title||"Exon",type:"exon",geneId:e.officialGeneSymbol}),(0,t.jsx)(lt.E7,{rootId:r+"-junction",title:e.title||"Junction",type:"junction",geneId:e.officialGeneSymbol})]}):null,e.type=="gene"?(0,t.jsxs)("div",{className:"gene-figures",children:[(0,t.jsx)(lt.hK,{rootId:r+"boxplot",title:e.title||"Boxplot",geneId:e.officialGeneSymbol}),(0,t.jsx)(lt.UA,{rootId:r+"violin",title:e.title||"Violin Plot",geneId:e.officialGeneSymbol})]}):null]})},Xn=pi,Ml=function(){return _jsx("div",{children:_jsx("img",{width:"100%",src:"/examples/molstar.png"})})},Ll=null,gi=c(69610),mi=c(54941),yi=c(81306),xi=c(59206),Si=c(24753),Zi=[{codon:858,count:23,tooltip:{header:"Title",body:"Description"},color:"#008000",id:"variant-id-001",label:{text:"L858R",textAnchor:"middle",fontSize:10,fontFamily:"arial"},selected:!0},{codon:746,count:17,tooltip:{header:"Title",body:"Description"},color:"#993404",selected:!0},{codon:861,count:5,tooltip:{header:"Title",body:"Description"},color:"#008000"},{codon:747,count:5,tooltip:{header:"Title",body:"Description"},color:"#993404",selected:!1},{codon:768,count:3,tooltip:{header:"Title",body:"Description"},color:"#008000"},{codon:754,count:3,tooltip:{header:"Title",body:"Description"},color:"#008000"},{codon:719,count:3,tooltip:{header:"Title",body:"Description"},color:"#008000"},{codon:709,count:3,tooltip:{header:"Title",body:"Description"},color:"#993404"},{codon:833,count:2,tooltip:{header:"Title",body:"Description"},color:"#008000"},{codon:1,count:1,tooltip:{header:"Title",body:"Description"},color:"#cf58bc"}],bi=[{startCodon:57,endCodon:167,label:"Recep_L_domain",color:"#2dcf00",tooltip:{header:"Recep_L_domain",body:"Recep_L_domain (57 - 167)"}},{startCodon:185,endCodon:338,label:"Furin-like",color:"#ff5353",tooltip:{header:"Furin-like"}},{startCodon:361,endCodon:480,label:"Recep_L_domain",color:"#2dcf00"},{startCodon:505,endCodon:636,label:"GF_recep_IV",color:"#5b5bff",tooltip:{header:"Title",body:"Description"}},{startCodon:713,endCodon:965,label:"Pkinase_Tyr",color:"#ebd61d",tooltip:{header:"Title",body:"Description"}}],Ol=function(v){(0,yi.Z)(n,v);var e=(0,xi.Z)(n);function n(){return(0,gi.Z)(this,n),e.apply(this,arguments)}return(0,mi.Z)(n,[{key:"render",value:function(){return(0,t.jsx)(Si.Z,{domains:bi,lollipops:Zi,vizWidth:1e3,vizHeight:300,hugoGeneSymbol:"PRG4",xMax:1e3,yMax:300,onLollipopClick:function(){}})}}]),n}(l.Component),Rl=null,Ci=function(e){var n=(0,l.useState)(""),a=(0,y.Z)(n,2),r=a[0],o=a[1],i=(0,l.useState)(""),s=(0,y.Z)(i,2),d=s[0],u=s[1];return(0,l.useEffect)(function(){e.geneSymbol&&u("https://omics-data.3steps.cn/fetch/sanger_cosmic?geneSymbol=".concat(e.geneSymbol,"&taxId=").concat(e.taxId||9606))},[e.geneSymbol]),(0,l.useEffect)(function(){e.rootId?o(e.rootId):o("sanger-cosmic")},[]),(0,t.jsx)("iframe",{id:r,title:"Cosmic Mutations",src:d,style:{width:"100%",height:"100%",border:"none",minHeight:"1000px"}})},ji=Ci,Ni=function(e){var n=(0,l.useState)(""),a=(0,y.Z)(n,2),r=a[0],o=a[1];return(0,l.useEffect)(function(){e.rootId?o(e.rootId):o("grna-selector")},[]),(0,t.jsx)(lt.tB,{geneId:"".concat(e.geneId),id:r})},wi=Ni,Al=c(42877),ki=function(e){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=(n=e.ensembl)===null||n===void 0?void 0:n.gene,o=e.symbol,i=e.entrezgene,s=[{label:"Summary",key:"summary",children:(0,t.jsx)(hi,{geneSymbol:o})},{label:"Gene",key:"gene",children:(0,t.jsx)(Xn,{officialGeneSymbol:r,type:"gene"})},{label:"Transcript",key:"transcript",children:(0,t.jsx)(Xn,{officialGeneSymbol:r,type:"transcript"})},{label:"Expression Atlas",key:"expression-atlas",children:(0,t.jsx)(ui,{geneSymbol:o})},{label:"Mutation",key:"mutation",children:(0,t.jsx)(ji,{geneSymbol:o})},{label:"Preferred sgRNAs",key:"preferred-sgrnas",children:(0,t.jsx)(wi,{geneId:i})}];return s.filter(function(d){return!a.includes(d.key)})},qn=24,Ei=16,Ii=function(){var e=(0,l.useState)(""),n=(0,y.Z)(e,2),a=n[0],r=n[1],o=(0,l.useState)(!1),i=(0,y.Z)(o,2),s=i[0],d=i[1],u=(0,l.useState)(qn),Z=(0,y.Z)(u,2),b=Z[0],x=Z[1];return(0,l.useEffect)(function(){x(s?Ei:qn)},[s]),(0,t.jsxs)(X.Z,{gutter:8,className:"chat-ai-container",children:[s?(0,t.jsx)(we.Z,{xxl:24-b,xl:24-b,lg:24-b,md:24,sm:24,xs:24,children:(0,t.jsx)(_t.Z,{message:a})}):null,(0,t.jsxs)(we.Z,{xxl:b,xl:b,lg:b,md:24,sm:24,xs:24,children:[(0,t.jsx)(W.Z,{shape:"circle",className:"chat-button",onClick:function(){d(!s)},icon:s?(0,t.jsx)(ii.Z,{}):(0,t.jsx)(li.Z,{})}),(0,t.jsx)(oi,{apis:{getStatistics:ze.aC,getGraphHistory:ze.Nx,postGraphHistory:ze.xD,deleteGraphHistory:ze.in,getNodeTypes:ze.zX,getLabels:ze.g7,getRelationships:ze.mc,postGraph:ze.zV,postDimensionReduction:ze.jN,postSimilarity:ze.aU},getGeneInfo:di,getItems4GenePanel:ki,postMessage:function(N){r(N)}})]})]})},Pi=Ii},67569:function(Ma,Nt,c){"use strict";c.d(Nt,{jN:function(){return Qt},Nx:function(){return Ye},xD:function(){return ke},in:function(){return ve},ix:function(){return me},$7:function(){return Q},P2:function(){return Fe},nx:function(){return tt},g7:function(){return Mt},zX:function(){return Lt},zV:function(){return Yt},mc:function(){return t},aU:function(){return Je},aC:function(){return gn}});var wt=c(93224),X=c(39428),ge=c(11849),W=c(3182),Ne=c(74310),we=null,y=["id"],_t=["id"],vn=["id"];function Qt(F,M){return kt.apply(this,arguments)}function kt(){return kt=(0,W.Z)((0,X.Z)().mark(function F(M,te){return(0,X.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,Ne.WY)("/api/v1/dimension",(0,ge.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:M},te||{})));case 1:case"end":return w.stop()}},F)})),kt.apply(this,arguments)}function Ye(F,M){return Et.apply(this,arguments)}function Et(){return Et=(0,W.Z)((0,X.Z)().mark(function F(M,te){return(0,X.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,Ne.WY)("/api/v1/graphs",(0,ge.Z)({method:"GET",params:(0,ge.Z)({},M)},te||{})));case 1:case"end":return w.stop()}},F)})),Et.apply(this,arguments)}function ke(F,M){return It.apply(this,arguments)}function It(){return It=(0,W.Z)((0,X.Z)().mark(function F(M,te){return(0,X.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,Ne.WY)("/api/v1/graphs",(0,ge.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:M},te||{})));case 1:case"end":return w.stop()}},F)})),It.apply(this,arguments)}function ft(F,M){return Pt.apply(this,arguments)}function Pt(){return Pt=_asyncToGenerator(_regeneratorRuntime().mark(function F(M,te){var oe,w;return _regeneratorRuntime().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return oe=M.id,w=_objectWithoutProperties(M,we),Se.abrupt("return",request("/api/v1/graphs/".concat(oe),_objectSpread({method:"GET",params:_objectSpread({},w)},te||{})));case 2:case"end":return Se.stop()}},F)})),Pt.apply(this,arguments)}function ve(F,M){return m.apply(this,arguments)}function m(){return m=(0,W.Z)((0,X.Z)().mark(function F(M,te){var oe,w;return(0,X.Z)().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return oe=M.id,w=(0,wt.Z)(M,y),Se.abrupt("return",(0,Ne.WY)("/api/v1/graphs/".concat(oe),(0,ge.Z)({method:"DELETE",params:(0,ge.Z)({},w)},te||{})));case 2:case"end":return Se.stop()}},F)})),m.apply(this,arguments)}function me(F,M){return Tt.apply(this,arguments)}function Tt(){return Tt=(0,W.Z)((0,X.Z)().mark(function F(M,te){return(0,X.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,Ne.WY)("/api/v1/knowledges",(0,ge.Z)({method:"GET",params:(0,ge.Z)({},M)},te||{})));case 1:case"end":return w.stop()}},F)})),Tt.apply(this,arguments)}function Q(F,M){return Dt.apply(this,arguments)}function Dt(){return Dt=(0,W.Z)((0,X.Z)().mark(function F(M,te){return(0,X.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,Ne.WY)("/api/v1/knowledges",(0,ge.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:M},te||{})));case 1:case"end":return w.stop()}},F)})),Dt.apply(this,arguments)}function Fe(F,M,te){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,W.Z)((0,X.Z)().mark(function F(M,te,oe){var w,rt;return(0,X.Z)().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return w=M.id,rt=(0,wt.Z)(M,_t),ot.abrupt("return",(0,Ne.WY)("/api/v1/knowledges/".concat(w),(0,ge.Z)({method:"PUT",headers:{"Content-Type":"application/json"},params:(0,ge.Z)({},rt),data:te},oe||{})));case 2:case"end":return ot.stop()}},F)})),Gt.apply(this,arguments)}function tt(F,M){return l.apply(this,arguments)}function l(){return l=(0,W.Z)((0,X.Z)().mark(function F(M,te){var oe,w;return(0,X.Z)().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return oe=M.id,w=(0,wt.Z)(M,vn),Se.abrupt("return",(0,Ne.WY)("/api/v1/knowledges/".concat(oe),(0,ge.Z)({method:"DELETE",params:(0,ge.Z)({},w)},te||{})));case 2:case"end":return Se.stop()}},F)})),l.apply(this,arguments)}function Mt(F,M){return ht.apply(this,arguments)}function ht(){return ht=(0,W.Z)((0,X.Z)().mark(function F(M,te){return(0,X.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,Ne.WY)("/api/v1/labels",(0,ge.Z)({method:"GET",params:(0,ge.Z)({},M)},te||{})));case 1:case"end":return w.stop()}},F)})),ht.apply(this,arguments)}function pn(F,M){return nt.apply(this,arguments)}function nt(){return nt=_asyncToGenerator(_regeneratorRuntime().mark(function F(M,te){return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",request("/api/v1/node-properties",_objectSpread({method:"GET",params:_objectSpread({},M)},te||{})));case 1:case"end":return w.stop()}},F)})),nt.apply(this,arguments)}function Lt(F){return vt.apply(this,arguments)}function vt(){return vt=(0,W.Z)((0,X.Z)().mark(function F(M){return(0,X.Z)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,Ne.WY)("/api/v1/node-types",(0,ge.Z)({method:"GET"},M||{})));case 1:case"end":return oe.stop()}},F)})),vt.apply(this,arguments)}function Yt(F,M){return at.apply(this,arguments)}function at(){return at=(0,W.Z)((0,X.Z)().mark(function F(M,te){return(0,X.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,Ne.WY)("/api/v1/nodes",(0,ge.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:M},te||{})));case 1:case"end":return w.stop()}},F)})),at.apply(this,arguments)}function La(F){return pt.apply(this,arguments)}function pt(){return pt=_asyncToGenerator(_regeneratorRuntime().mark(function F(M){return _regeneratorRuntime().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",request("/api/v1/relationship-types",_objectSpread({method:"GET"},M||{})));case 1:case"end":return oe.stop()}},F)})),pt.apply(this,arguments)}function t(F,M){return gt.apply(this,arguments)}function gt(){return gt=(0,W.Z)((0,X.Z)().mark(function F(M,te){return(0,X.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,Ne.WY)("/api/v1/relationships",(0,ge.Z)({method:"GET",params:(0,ge.Z)({},M)},te||{})));case 1:case"end":return w.stop()}},F)})),gt.apply(this,arguments)}function Je(F,M){return se.apply(this,arguments)}function se(){return se=(0,W.Z)((0,X.Z)().mark(function F(M,te){return(0,X.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,Ne.WY)("/api/v1/similarity",(0,ge.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:M},te||{})));case 1:case"end":return w.stop()}},F)})),se.apply(this,arguments)}function gn(F){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,W.Z)((0,X.Z)().mark(function F(M){return(0,X.Z)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,Ne.WY)("/api/v1/statistics",(0,ge.Z)({method:"GET"},M||{})));case 1:case"end":return oe.stop()}},F)})),Ie.apply(this,arguments)}},75410:function(){},48628:function(){},31601:function(){},67792:function(){},75042:function(){}}]);
